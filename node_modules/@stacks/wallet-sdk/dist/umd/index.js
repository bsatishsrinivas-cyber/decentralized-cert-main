/*! For license information please see index.js.LICENSE.txt */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.StacksWalletSdk=n():e.StacksWalletSdk=n()}(this,(()=>(()=>{var e,n,t={525:(e,n)=>{"use strict";function t(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function o(e,...n){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(n.length>0&&!n.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");t(e.outputLen),t(e.blockLen)}function s(e,n=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(n&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,n){o(e);const t=n.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}Object.defineProperty(n,"__esModule",{value:!0}),n.output=n.exists=n.hash=n.bytes=n.bool=n.number=void 0,n.number=t,n.bool=r,n.bytes=o,n.hash=i,n.exists=s,n.output=a;const c={number:t,bool:r,bytes:o,hash:i,exists:s,output:a};n.default=c},350:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SHA2=void 0;const r=t(525),o=t(64);class i extends o.Hash{constructor(e,n,t,r){super(),this.blockLen=e,this.outputLen=n,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,o.createView)(this.buffer)}update(e){r.default.exists(this);const{view:n,buffer:t,blockLen:i}=this,s=(e=(0,o.toBytes)(e)).length;for(let r=0;r<s;){const a=Math.min(i-this.pos,s-r);if(a!==i)t.set(e.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===i&&(this.process(n,0),this.pos=0);else{const n=(0,o.createView)(e);for(;i<=s-r;r+=i)this.process(n,r)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){r.default.exists(this),r.default.output(e,this),this.finished=!0;const{buffer:n,view:t,blockLen:i,isLE:s}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(t,0),a=0);for(let e=a;e<i;e++)n[e]=0;!function(e,n,t,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(n,t,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(t>>o&i),a=Number(t&i),c=r?4:0,u=r?0:4;e.setUint32(n+c,s,r),e.setUint32(n+u,a,r)}(t,i-8,BigInt(8*this.length),s),this.process(t,0);const c=(0,o.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,h=this.get();if(l>h.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)c.setUint32(4*e,h[e],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const t=e.slice(0,n);return this.destroy(),t}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:t,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%n&&e.buffer.set(t),e}}n.SHA2=i},655:(e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.add=n.toBig=n.split=n.fromBig=void 0;const t=BigInt(2**32-1),r=BigInt(32);function o(e,n=!1){return n?{h:Number(e&t),l:Number(e>>r&t)}:{h:0|Number(e>>r&t),l:0|Number(e&t)}}function i(e,n=!1){let t=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=o(e[i],n);[t[i],r[i]]=[s,a]}return[t,r]}function s(e,n,t,r){const o=(n>>>0)+(r>>>0);return{h:e+t+(o/2**32|0)|0,l:0|o}}n.fromBig=o,n.split=i,n.toBig=(e,n)=>BigInt(e>>>0)<<r|BigInt(n>>>0),n.add=s;const a={fromBig:o,split:i,toBig:n.toBig,shrSH:(e,n,t)=>e>>>t,shrSL:(e,n,t)=>e<<32-t|n>>>t,rotrSH:(e,n,t)=>e>>>t|n<<32-t,rotrSL:(e,n,t)=>e<<32-t|n>>>t,rotrBH:(e,n,t)=>e<<64-t|n>>>t-32,rotrBL:(e,n,t)=>e>>>t-32|n<<64-t,rotr32H:(e,n)=>n,rotr32L:(e,n)=>e,rotlSH:(e,n,t)=>e<<t|n>>>32-t,rotlSL:(e,n,t)=>n<<t|e>>>32-t,rotlBH:(e,n,t)=>n<<t-32|e>>>64-t,rotlBL:(e,n,t)=>e<<t-32|n>>>64-t,add:s,add3L:(e,n,t)=>(e>>>0)+(n>>>0)+(t>>>0),add3H:(e,n,t,r)=>n+t+r+(e/2**32|0)|0,add4L:(e,n,t,r)=>(e>>>0)+(n>>>0)+(t>>>0)+(r>>>0),add4H:(e,n,t,r,o)=>n+t+r+o+(e/2**32|0)|0,add5H:(e,n,t,r,o,i)=>n+t+r+o+i+(e/2**32|0)|0,add5L:(e,n,t,r,o)=>(e>>>0)+(n>>>0)+(t>>>0)+(r>>>0)+(o>>>0)};n.default=a},661:(e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.crypto=void 0,n.crypto={node:void 0,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0}},377:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hmac=void 0;const r=t(525),o=t(64);class i extends o.Hash{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,r.default.hash(e);const t=(0,o.toBytes)(n);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(t.length>i?e.create().update(t).digest():t);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return r.default.exists(this),this.iHash.update(e),this}digestInto(e){r.default.exists(this),r.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:t,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=n._cloneInto(e.oHash),e.iHash=t._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}n.hmac=(e,n,t)=>new i(e,n).update(t).digest(),n.hmac.create=(e,n)=>new i(e,n)},179:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.pbkdf2Async=n.pbkdf2=void 0;const r=t(525),o=t(377),i=t(64);function s(e,n,t,s){r.default.hash(e);const a=(0,i.checkOpts)({dkLen:32,asyncTick:10},s),{c,dkLen:u,asyncTick:l}=a;if(r.default.number(c),r.default.number(u),r.default.number(l),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const h=(0,i.toBytes)(n),f=(0,i.toBytes)(t),d=new Uint8Array(u),p=o.hmac.create(e,h),y=p._cloneInto().update(f);return{c,dkLen:u,asyncTick:l,DK:d,PRF:p,PRFSalt:y}}function a(e,n,t,r,o){return e.destroy(),n.destroy(),r&&r.destroy(),o.fill(0),t}n.pbkdf2=function(e,n,t,r){const{c:o,dkLen:c,DK:u,PRF:l,PRFSalt:h}=s(e,n,t,r);let f;const d=new Uint8Array(4),p=(0,i.createView)(d),y=new Uint8Array(l.outputLen);for(let e=1,n=0;n<c;e++,n+=l.outputLen){const t=u.subarray(n,n+l.outputLen);p.setInt32(0,e,!1),(f=h._cloneInto(f)).update(d).digestInto(y),t.set(y.subarray(0,t.length));for(let e=1;e<o;e++){l._cloneInto(f).update(y).digestInto(y);for(let e=0;e<t.length;e++)t[e]^=y[e]}}return a(l,h,u,f,y)},n.pbkdf2Async=async function(e,n,t,r){const{c:o,dkLen:c,asyncTick:u,DK:l,PRF:h,PRFSalt:f}=s(e,n,t,r);let d;const p=new Uint8Array(4),y=(0,i.createView)(p),g=new Uint8Array(h.outputLen);for(let e=1,n=0;n<c;e++,n+=h.outputLen){const t=l.subarray(n,n+h.outputLen);y.setInt32(0,e,!1),(d=f._cloneInto(d)).update(p).digestInto(g),t.set(g.subarray(0,t.length)),await(0,i.asyncLoop)(o-1,u,(e=>{h._cloneInto(d).update(g).digestInto(g);for(let e=0;e<t.length;e++)t[e]^=g[e]}))}return a(h,f,l,d,g)}},53:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sha224=n.sha256=void 0;const r=t(350),o=t(64),i=(e,n,t)=>e&n^e&t^n&t,s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class u extends r.SHA2{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:n,C:t,D:r,E:o,F:i,G:s,H:a}=this;return[e,n,t,r,o,i,s,a]}set(e,n,t,r,o,i,s,a){this.A=0|e,this.B=0|n,this.C=0|t,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,n){for(let t=0;t<16;t++,n+=4)c[t]=e.getUint32(n,!1);for(let e=16;e<64;e++){const n=c[e-15],t=c[e-2],r=(0,o.rotr)(n,7)^(0,o.rotr)(n,18)^n>>>3,i=(0,o.rotr)(t,17)^(0,o.rotr)(t,19)^t>>>10;c[e]=i+c[e-7]+r+c[e-16]|0}let{A:t,B:r,C:a,D:u,E:l,F:h,G:f,H:d}=this;for(let e=0;e<64;e++){const n=d+((0,o.rotr)(l,6)^(0,o.rotr)(l,11)^(0,o.rotr)(l,25))+((p=l)&h^~p&f)+s[e]+c[e]|0,y=((0,o.rotr)(t,2)^(0,o.rotr)(t,13)^(0,o.rotr)(t,22))+i(t,r,a)|0;d=f,f=h,h=l,l=u+n|0,u=a,a=r,r=t,t=n+y|0}var p;t=t+this.A|0,r=r+this.B|0,a=a+this.C|0,u=u+this.D|0,l=l+this.E|0,h=h+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(t,r,a,u,l,h,f,d)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class l extends u{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}n.sha256=(0,o.wrapConstructor)((()=>new u)),n.sha224=(0,o.wrapConstructor)((()=>new l))},540:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sha384=n.sha512_256=n.sha512_224=n.sha512=n.SHA512=void 0;const r=t(350),o=t(655),i=t(64),[s,a]=o.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),c=new Uint32Array(80),u=new Uint32Array(80);class l extends r.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:t,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:f,Gl:d,Hh:p,Hl:y}=this;return[e,n,t,r,o,i,s,a,c,u,l,h,f,d,p,y]}set(e,n,t,r,o,i,s,a,c,u,l,h,f,d,p,y){this.Ah=0|e,this.Al=0|n,this.Bh=0|t,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(e,n){for(let t=0;t<16;t++,n+=4)c[t]=e.getUint32(n),u[t]=e.getUint32(n+=4);for(let e=16;e<80;e++){const n=0|c[e-15],t=0|u[e-15],r=o.default.rotrSH(n,t,1)^o.default.rotrSH(n,t,8)^o.default.shrSH(n,t,7),i=o.default.rotrSL(n,t,1)^o.default.rotrSL(n,t,8)^o.default.shrSL(n,t,7),s=0|c[e-2],a=0|u[e-2],l=o.default.rotrSH(s,a,19)^o.default.rotrBH(s,a,61)^o.default.shrSH(s,a,6),h=o.default.rotrSL(s,a,19)^o.default.rotrBL(s,a,61)^o.default.shrSL(s,a,6),f=o.default.add4L(i,h,u[e-7],u[e-16]),d=o.default.add4H(f,r,l,c[e-7],c[e-16]);c[e]=0|d,u[e]=0|f}let{Ah:t,Al:r,Bh:i,Bl:l,Ch:h,Cl:f,Dh:d,Dl:p,Eh:y,El:g,Fh:w,Fl:b,Gh:m,Gl:v,Hh:x,Hl:E}=this;for(let e=0;e<80;e++){const n=o.default.rotrSH(y,g,14)^o.default.rotrSH(y,g,18)^o.default.rotrBH(y,g,41),A=o.default.rotrSL(y,g,14)^o.default.rotrSL(y,g,18)^o.default.rotrBL(y,g,41),S=y&w^~y&m,k=g&b^~g&v,C=o.default.add5L(E,A,k,a[e],u[e]),U=o.default.add5H(C,x,n,S,s[e],c[e]),_=0|C,I=o.default.rotrSH(t,r,28)^o.default.rotrBH(t,r,34)^o.default.rotrBH(t,r,39),B=o.default.rotrSL(t,r,28)^o.default.rotrBL(t,r,34)^o.default.rotrBL(t,r,39),P=t&i^t&h^i&h,H=r&l^r&f^l&f;x=0|m,E=0|v,m=0|w,v=0|b,w=0|y,b=0|g,({h:y,l:g}=o.default.add(0|d,0|p,0|U,0|_)),d=0|h,p=0|f,h=0|i,f=0|l,i=0|t,l=0|r;const T=o.default.add3L(_,B,H);t=o.default.add3H(T,U,I,P),r=0|T}({h:t,l:r}=o.default.add(0|this.Ah,0|this.Al,0|t,0|r)),({h:i,l}=o.default.add(0|this.Bh,0|this.Bl,0|i,0|l)),({h,l:f}=o.default.add(0|this.Ch,0|this.Cl,0|h,0|f)),({h:d,l:p}=o.default.add(0|this.Dh,0|this.Dl,0|d,0|p)),({h:y,l:g}=o.default.add(0|this.Eh,0|this.El,0|y,0|g)),({h:w,l:b}=o.default.add(0|this.Fh,0|this.Fl,0|w,0|b)),({h:m,l:v}=o.default.add(0|this.Gh,0|this.Gl,0|m,0|v)),({h:x,l:E}=o.default.add(0|this.Hh,0|this.Hl,0|x,0|E)),this.set(t,r,i,l,h,f,d,p,y,g,w,b,m,v,x,E)}roundClean(){c.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}n.SHA512=l;class h extends l{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class f extends l{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class d extends l{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}n.sha512=(0,i.wrapConstructor)((()=>new l)),n.sha512_224=(0,i.wrapConstructor)((()=>new h)),n.sha512_256=(0,i.wrapConstructor)((()=>new f)),n.sha384=(0,i.wrapConstructor)((()=>new d))},64:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.randomBytes=n.wrapConstructorWithOpts=n.wrapConstructor=n.checkOpts=n.Hash=n.concatBytes=n.toBytes=n.utf8ToBytes=n.asyncLoop=n.nextTick=n.hexToBytes=n.bytesToHex=n.isLE=n.rotr=n.createView=n.u32=n.u8=void 0;const r=t(661);if(n.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),n.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),n.rotr=(e,n)=>e<<32-n|e>>>n,n.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!n.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},((e,n)=>n.toString(16).padStart(2,"0")));function i(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function s(e){if("string"==typeof e&&(e=i(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}n.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let n="";for(let t=0;t<e.length;t++)n+=o[e[t]];return n},n.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const n=new Uint8Array(e.length/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n},n.nextTick=async()=>{},n.asyncLoop=async function(e,t,r){let o=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-o;e>=0&&e<t||(await(0,n.nextTick)(),o+=e)}},n.utf8ToBytes=i,n.toBytes=s,n.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const n=e.reduce(((e,n)=>e+n.length),0),t=new Uint8Array(n);for(let n=0,r=0;n<e.length;n++){const o=e[n];t.set(o,r),r+=o.length}return t},n.Hash=class{clone(){return this._cloneInto()}},n.checkOpts=function(e,n){if(void 0!==n&&("object"!=typeof n||(t=n,"[object Object]"!==Object.prototype.toString.call(t)||t.constructor!==Object)))throw new TypeError("Options should be object or undefined");var t;return Object.assign(e,n)},n.wrapConstructor=function(e){const n=n=>e().update(s(n)).digest(),t=e();return n.outputLen=t.outputLen,n.blockLen=t.blockLen,n.create=()=>e(),n},n.wrapConstructorWithOpts=function(e){const n=(n,t)=>e(t).update(s(n)).digest(),t=e({});return n.outputLen=t.outputLen,n.blockLen=t.blockLen,n.create=n=>e(n),n},n.randomBytes=function(e=32){if(r.crypto.web)return r.crypto.web.getRandomValues(new Uint8Array(e));if(r.crypto.node)return new Uint8Array(r.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}},698:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.utils=n.schnorr=n.verify=n.signSync=n.sign=n.getSharedSecret=n.recoverPublicKey=n.getPublicKey=n.Signature=n.Point=n.CURVE=void 0;const r=t(695),o=BigInt(0),i=BigInt(1),s=BigInt(2),a=BigInt(3),c=BigInt(8),u=Object.freeze({a:o,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:i,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});n.CURVE=u;const l=(e,n)=>(e+n/s)/n,h={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n}=u,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-i*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,a=BigInt("0x100000000000000000000000000000000"),c=l(s*e,n),h=l(-r*e,n);let f=R(e-c*t-h*o,n),d=R(-c*r-h*s,n);const p=f>a,y=d>a;if(p&&(f=n-f),y&&(d=n-d),f>a||d>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:p,k1:f,k2neg:y,k2:d}}},f=32,d=32,p=f+1,y=2*f+1;function g(e){const{a:n,b:t}=u,r=R(e*e),o=R(r*e);return R(o+n*e+t)}const w=u.a===o;class b extends Error{constructor(e){super(e)}}function m(e){if(!(e instanceof v))throw new TypeError("JacobianPoint expected")}class v{constructor(e,n,t){this.x=e,this.y=n,this.z=t}static fromAffine(e){if(!(e instanceof A))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(A.ZERO)?v.ZERO:new v(e.x,e.y,i)}static toAffineBatch(e){const n=function(e,n=u.P){const t=new Array(e.length),r=D(e.reduce(((e,r,i)=>r===o?e:(t[i]=e,R(e*r,n))),i),n);return e.reduceRight(((e,r,i)=>r===o?e:(t[i]=R(e*t[i],n),R(e*r,n))),r),t}(e.map((e=>e.z)));return e.map(((e,t)=>e.toAffine(n[t])))}static normalizeZ(e){return v.toAffineBatch(e).map(v.fromAffine)}equals(e){m(e);const{x:n,y:t,z:r}=this,{x:o,y:i,z:s}=e,a=R(r*r),c=R(s*s),u=R(n*c),l=R(o*a),h=R(R(t*s)*c),f=R(R(i*r)*a);return u===l&&h===f}negate(){return new v(this.x,R(-this.y),this.z)}double(){const{x:e,y:n,z:t}=this,r=R(e*e),o=R(n*n),i=R(o*o),u=e+o,l=R(s*(R(u*u)-r-i)),h=R(a*r),f=R(h*h),d=R(f-s*l),p=R(h*(l-d)-c*i),y=R(s*n*t);return new v(d,p,y)}add(e){m(e);const{x:n,y:t,z:r}=this,{x:i,y:a,z:c}=e;if(i===o||a===o)return this;if(n===o||t===o)return e;const u=R(r*r),l=R(c*c),h=R(n*l),f=R(i*u),d=R(R(t*c)*l),p=R(R(a*r)*u),y=R(f-h),g=R(p-d);if(y===o)return g===o?this.double():v.ZERO;const w=R(y*y),b=R(y*w),x=R(h*w),E=R(g*g-b-s*x),A=R(g*(x-E)-d*b),S=R(r*c*y);return new v(E,A,S)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const n=v.ZERO;if("bigint"==typeof e&&e===o)return n;let t=K(e);if(t===i)return this;if(!w){let e=n,r=this;for(;t>o;)t&i&&(e=e.add(r)),r=r.double(),t>>=i;return e}let{k1neg:r,k1:s,k2neg:a,k2:c}=h.splitScalar(t),u=n,l=n,f=this;for(;s>o||c>o;)s&i&&(u=u.add(f)),c&i&&(l=l.add(f)),f=f.double(),s>>=i,c>>=i;return r&&(u=u.negate()),a&&(l=l.negate()),l=new v(R(l.x*h.beta),l.y,l.z),u.add(l)}precomputeWindow(e){const n=w?128/e+1:256/e+1,t=[];let r=this,o=r;for(let i=0;i<n;i++){o=r,t.push(o);for(let n=1;n<2**(e-1);n++)o=o.add(r),t.push(o);r=o.double()}return t}wNAF(e,n){!n&&this.equals(v.BASE)&&(n=A.BASE);const t=n&&n._WINDOW_SIZE||1;if(256%t)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=n&&E.get(n);r||(r=this.precomputeWindow(t),n&&1!==t&&(r=v.normalizeZ(r),E.set(n,r)));let o=v.ZERO,s=v.BASE;const a=1+(w?128/t:256/t),c=2**(t-1),u=BigInt(2**t-1),l=2**t,h=BigInt(t);for(let n=0;n<a;n++){const t=n*c;let a=Number(e&u);e>>=h,a>c&&(a-=l,e+=i);const f=t,d=t+Math.abs(a)-1,p=n%2!=0,y=a<0;0===a?s=s.add(x(p,r[f])):o=o.add(x(y,r[d]))}return{p:o,f:s}}multiply(e,n){let t,r,o=K(e);if(w){const{k1neg:e,k1:i,k2neg:s,k2:a}=h.splitScalar(o);let{p:c,f:u}=this.wNAF(i,n),{p:l,f}=this.wNAF(a,n);c=x(e,c),l=x(s,l),l=new v(R(l.x*h.beta),l.y,l.z),t=c.add(l),r=u.add(f)}else{const{p:e,f:i}=this.wNAF(o,n);t=e,r=i}return v.normalizeZ([t,r])[0]}toAffine(e){const{x:n,y:t,z:r}=this,o=this.equals(v.ZERO);null==e&&(e=o?c:D(r));const s=e,a=R(s*s),u=R(a*s),l=R(n*a),h=R(t*u),f=R(r*s);if(o)return A.ZERO;if(f!==i)throw new Error("invZ was invalid");return new A(l,h)}}function x(e,n){const t=n.negate();return e?t:n}v.BASE=new v(u.Gx,u.Gy,i),v.ZERO=new v(o,i,o);const E=new WeakMap;class A{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,E.delete(this)}hasEvenY(){return this.y%s===o}static fromCompressedHex(e){const n=32===e.length,t=$(n?e:e.subarray(1));if(!G(t))throw new Error("Point is not on curve");let r=function(e){const{P:n}=u,t=BigInt(6),r=BigInt(11),o=BigInt(22),i=BigInt(23),c=BigInt(44),l=BigInt(88),h=e*e*e%n,f=h*h*e%n,d=L(f,a)*f%n,p=L(d,a)*f%n,y=L(p,s)*h%n,g=L(y,r)*y%n,w=L(g,o)*g%n,b=L(w,c)*w%n,m=L(b,l)*b%n,v=L(m,c)*w%n,x=L(v,a)*f%n,E=L(x,i)*g%n,A=L(E,t)*h%n,S=L(A,s);if(S*S%n!==e)throw new Error("Cannot find square root");return S}(g(t));const o=(r&i)===i;n?o&&(r=R(-r)):1==(1&e[0])!==o&&(r=R(-r));const c=new A(t,r);return c.assertValidity(),c}static fromUncompressedHex(e){const n=$(e.subarray(1,f+1)),t=$(e.subarray(f+1,2*f+1)),r=new A(n,t);return r.assertValidity(),r}static fromHex(e){const n=j(e),t=n.length,r=n[0];if(t===f)return this.fromCompressedHex(n);if(t===p&&(2===r||3===r))return this.fromCompressedHex(n);if(t===y&&4===r)return this.fromUncompressedHex(n);throw new Error(`Point.fromHex: received invalid point. Expected 32-${p} compressed bytes or ${y} uncompressed bytes, not ${t}`)}static fromPrivateKey(e){return A.BASE.multiply(J(e))}static fromSignature(e,n,t){const{r,s:o}=X(n);if(![0,1,2,3].includes(t))throw new Error("Cannot recover: invalid recovery bit");const i=F(j(e)),{n:s}=u,a=2===t||3===t?r+s:r,c=D(a,s),l=R(-i*c,s),h=R(o*c,s),f=1&t?"03":"02",d=A.fromHex(f+P(a)),p=A.BASE.multiplyAndAddUnsafe(d,l,h);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(e=!1){return N(this.toHex(e))}toHex(e=!1){const n=P(this.x);return e?`${this.hasEvenY()?"02":"03"}${n}`:`04${n}${P(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:n,y:t}=this;if(!G(n)||!G(t))throw new Error(e);const r=R(t*t);if(R(r-g(n))!==o)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new A(this.x,R(-this.y))}double(){return v.fromAffine(this).double().toAffine()}add(e){return v.fromAffine(this).add(v.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return v.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,n,t){const r=v.fromAffine(this),s=n===o||n===i||this!==A.BASE?r.multiplyUnsafe(n):r.multiply(n),a=v.fromAffine(e).multiplyUnsafe(t),c=s.add(a);return c.equals(v.ZERO)?void 0:c.toAffine()}}function S(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function k(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${I(e)}`);const n=e[1],t=e.subarray(2,n+2);if(!n||t.length!==n)throw new Error("Invalid signature integer: wrong length");if(0===t[0]&&t[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:$(t),left:e.subarray(n+2)}}n.Point=A,A.BASE=new A(u.Gx,u.Gy),A.ZERO=new A(o,o);class C{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromCompact(e){const n=e instanceof Uint8Array,t="Signature.fromCompact";if("string"!=typeof e&&!n)throw new TypeError(`${t}: Expected string or Uint8Array`);const r=n?I(e):e;if(128!==r.length)throw new Error(`${t}: Expected 64-byte hex`);return new C(O(r.slice(0,64)),O(r.slice(64,128)))}static fromDER(e){const n=e instanceof Uint8Array;if("string"!=typeof e&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:t,s:r}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${I(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:n,left:t}=k(e.subarray(2)),{data:r,left:o}=k(t);if(o.length)throw new Error(`Invalid signature: left bytes after parsing: ${I(o)}`);return{r:n,s:r}}(n?e:N(e));return new C(t,r)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:n}=this;if(!V(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!V(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=u.n>>i;return this.s>e}normalizeS(){return this.hasHighS()?new C(this.r,R(-this.s,u.n)):this}toDERRawBytes(){return N(this.toDERHex())}toDERHex(){const e=S(T(this.s)),n=S(T(this.r)),t=e.length/2,r=n.length/2,o=T(t),i=T(r);return`30${T(r+t+4)}02${i}${n}02${o}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return N(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}function U(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const n=e.reduce(((e,n)=>e+n.length),0),t=new Uint8Array(n);for(let n=0,r=0;n<e.length;n++){const o=e[n];t.set(o,r),r+=o.length}return t}n.Signature=C;const _=Array.from({length:256},((e,n)=>n.toString(16).padStart(2,"0")));function I(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let n="";for(let t=0;t<e.length;t++)n+=_[e[t]];return n}const B=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function P(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(o<=e&&e<B))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function H(e){const n=N(P(e));if(32!==n.length)throw new Error("Error: expected 32 bytes");return n}function T(e){const n=e.toString(16);return 1&n.length?`0${n}`:n}function O(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function N(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const n=new Uint8Array(e.length/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n}function $(e){return O(I(e))}function j(e){return e instanceof Uint8Array?Uint8Array.from(e):N(e)}function K(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&V(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function R(e,n=u.P){const t=e%n;return t>=o?t:n+t}function L(e,n){const{P:t}=u;let r=e;for(;n-- >o;)r*=r,r%=t;return r}function D(e,n=u.P){if(e===o||n<=o)throw new Error(`invert: expected positive integers, got n=${e} mod=${n}`);let t=R(e,n),r=n,s=o,a=i,c=i,l=o;for(;t!==o;){const e=r/t,n=r%t,o=s-c*e,i=a-l*e;r=t,t=n,s=c,a=l,c=o,l=i}if(r!==i)throw new Error("invert: does not exist");return R(s,n)}function F(e,n=!1){const t=function(e){const n=8*e.length-8*d,t=$(e);return n>0?t>>BigInt(n):t}(e);if(n)return t;const{n:r}=u;return t>=r?t-r:t}let M,z;class W{constructor(e,n){if(this.hashLen=e,this.qByteLen=n,"number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof n||n<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return n.utils.hmacSha256(this.k,...e)}hmacSync(...e){return z(this.k,...e)}checkSync(){if("function"!=typeof z)throw new b("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const t=this.v.slice();n.push(t),e+=this.v.length}return U(...n)}generateSync(){this.checkSync(),this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const t=this.v.slice();n.push(t),e+=this.v.length}return U(...n)}}function V(e){return o<e&&e<u.n}function G(e){return o<e&&e<u.P}function q(e,n,t,r=!0){const{n:s}=u,a=F(e,!0);if(!V(a))return;const c=D(a,s),l=A.BASE.multiply(a),h=R(l.x,s);if(h===o)return;const f=R(c*R(n+t*h,s),s);if(f===o)return;let d=new C(h,f),p=(l.x===d.r?0:2)|Number(l.y&i);return r&&d.hasHighS()&&(d=d.normalizeS(),p^=1),{sig:d,recovery:p}}function J(e){let n;if("bigint"==typeof e)n=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)n=BigInt(e);else if("string"==typeof e){if(e.length!==2*d)throw new Error("Expected 32 bytes of private key");n=O(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==d)throw new Error("Expected 32 bytes of private key");n=$(e)}if(!V(n))throw new Error("Expected private key: 0 < key < n");return n}function Z(e){return e instanceof A?(e.assertValidity(),e):A.fromHex(e)}function X(e){if(e instanceof C)return e.assertValidity(),e;try{return C.fromDER(e)}catch(n){return C.fromCompact(e)}}function Y(e){const n=e instanceof Uint8Array,t="string"==typeof e,r=(n||t)&&e.length;return n?r===p||r===y:t?r===2*p||r===2*y:e instanceof A}function Q(e){return $(e.length>f?e.slice(0,f):e)}function ee(e){const n=Q(e),t=R(n,u.n);return ne(t<o?n:t)}function ne(e){return H(e)}function te(e,t,r){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const o=j(e),i=J(t),s=[ne(i),ee(o)];if(null!=r){!0===r&&(r=n.utils.randomBytes(f));const e=j(r);if(e.length!==f)throw new Error(`sign: Expected ${f} bytes of extra data`);s.push(e)}return{seed:U(...s),m:Q(o),d:i}}function re(e,n){const{sig:t,recovery:r}=e,{der:o,recovered:i}=Object.assign({canonical:!0,der:!0},n),s=o?t.toDERRawBytes():t.toCompactRawBytes();return i?[s,r]:s}n.getPublicKey=function(e,n=!1){return A.fromPrivateKey(e).toRawBytes(n)},n.recoverPublicKey=function(e,n,t,r=!1){return A.fromSignature(e,n,t).toRawBytes(r)},n.getSharedSecret=function(e,n,t=!1){if(Y(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!Y(n))throw new TypeError("getSharedSecret: second arg must be public key");const r=Z(n);return r.assertValidity(),r.multiply(J(e)).toRawBytes(t)},n.sign=async function(e,n,t={}){const{seed:r,m:o,d:i}=te(e,n,t.extraEntropy),s=new W(32,d);let a;for(await s.reseed(r);!(a=q(await s.generate(),o,i,t.canonical));)await s.reseed();return re(a,t)},n.signSync=function(e,n,t={}){const{seed:r,m:o,d:i}=te(e,n,t.extraEntropy),s=new W(32,d);let a;for(s.reseedSync(r);!(a=q(s.generateSync(),o,i,t.canonical));)s.reseedSync();return re(a,t)};const oe={strict:!0};function ie(e){return R($(e),u.n)}n.verify=function(e,n,t,r=oe){let o;try{o=X(e),n=j(n)}catch(e){return!1}const{r:i,s}=o;if(r.strict&&o.hasHighS())return!1;const a=F(n);let c;try{c=Z(t)}catch(e){return!1}const{n:l}=u,h=D(s,l),f=R(a*h,l),d=R(i*h,l),p=A.BASE.multiplyAndAddUnsafe(c,f,d);return!!p&&R(p.x,l)===i};class se{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromHex(e){const n=j(e);if(64!==n.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${n.length}`);const t=$(n.subarray(0,32)),r=$(n.subarray(32,64));return new se(t,r)}assertValidity(){const{r:e,s:n}=this;if(!G(e)||!V(n))throw new Error("Invalid signature")}toHex(){return P(this.r)+P(this.s)}toRawBytes(){return N(this.toHex())}}class ae{constructor(e,t,r=n.utils.randomBytes()){if(null==e)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=j(e);const{x:o,scalar:i}=this.getScalar(J(t));if(this.px=o,this.d=i,this.rand=j(r),32!==this.rand.length)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){const n=A.fromPrivateKey(e),t=n.hasEvenY()?e:u.n-e;return{point:n,scalar:t,x:n.toRawX()}}initNonce(e,n){return H(e^$(n))}finalizeNonce(e){const n=R($(e),u.n);if(n===o)throw new Error("sign: Creation of signature failed. k is zero");const{point:t,x:r,scalar:i}=this.getScalar(n);return{R:t,rx:r,k:i}}finalizeSig(e,n,t,r){return new se(e.x,R(n+t*r,u.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:e,d:t,px:r,rand:o}=this,i=n.utils.taggedHash,s=this.initNonce(t,await i(de.aux,o)),{R:a,rx:c,k:u}=this.finalizeNonce(await i(de.nonce,s,r,e)),l=ie(await i(de.challenge,c,r,e)),h=this.finalizeSig(a,u,l,t);return await le(h,e,r)||this.error(),h}calcSync(){const{m:e,d:t,px:r,rand:o}=this,i=n.utils.taggedHashSync,s=this.initNonce(t,i(de.aux,o)),{R:a,rx:c,k:u}=this.finalizeNonce(i(de.nonce,s,r,e)),l=ie(i(de.challenge,c,r,e)),h=this.finalizeSig(a,u,l,t);return he(h,e,r)||this.error(),h}}function ce(e,n,t){const r=e instanceof se,o=r?e:se.fromHex(e);return r&&o.assertValidity(),{...o,m:j(n),P:Z(t)}}function ue(e,n,t,r){const o=A.BASE.multiplyAndAddUnsafe(n,J(t),R(-r,u.n));return!(!o||!o.hasEvenY()||o.x!==e)}async function le(e,t,r){try{const{r:o,s:i,m:s,P:a}=ce(e,t,r),c=ie(await n.utils.taggedHash(de.challenge,H(o),a.toRawX(),s));return ue(o,a,i,c)}catch(e){return!1}}function he(e,t,r){try{const{r:o,s:i,m:s,P:a}=ce(e,t,r),c=ie(n.utils.taggedHashSync(de.challenge,H(o),a.toRawX(),s));return ue(o,a,i,c)}catch(e){if(e instanceof b)throw e;return!1}}n.schnorr={Signature:se,getPublicKey:function(e){return A.fromPrivateKey(e).toRawX()},sign:async function(e,n,t){return new ae(e,n,t).calc()},verify:le,signSync:function(e,n,t){return new ae(e,n,t).calcSync()},verifySync:he},A.BASE._setWindowSize(8);const fe={node:r,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},de={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},pe={};n.utils={bytesToHex:I,hexToBytes:N,concatBytes:U,mod:R,invert:D,isValidPrivateKey(e){try{return J(e),!0}catch(e){return!1}},_bigintTo32Bytes:H,_normalizePrivateKey:J,hashToPrivateKey:e=>{e=j(e);const n=d+8;if(e.length<n||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return H(R($(e),u.n-i)+i)},randomBytes:(e=32)=>{if(fe.web)return fe.web.getRandomValues(new Uint8Array(e));if(fe.node){const{randomBytes:n}=fe.node;return Uint8Array.from(n(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>n.utils.hashToPrivateKey(n.utils.randomBytes(d+8)),precompute(e=8,n=A.BASE){const t=n===A.BASE?n:new A(n.x,n.y);return t._setWindowSize(e),t.multiply(a),t},sha256:async(...e)=>{if(fe.web){const n=await fe.web.subtle.digest("SHA-256",U(...e));return new Uint8Array(n)}if(fe.node){const{createHash:n}=fe.node,t=n("sha256");return e.forEach((e=>t.update(e))),Uint8Array.from(t.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...n)=>{if(fe.web){const t=await fe.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=U(...n),o=await fe.web.subtle.sign("HMAC",t,r);return new Uint8Array(o)}if(fe.node){const{createHmac:t}=fe.node,r=t("sha256",e);return n.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=pe[e];if(void 0===r){const t=await n.utils.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=U(t,t),pe[e]=r}return n.utils.sha256(r,...t)},taggedHashSync:(e,...n)=>{if("function"!=typeof M)throw new b("sha256Sync is undefined, you need to set it");let t=pe[e];if(void 0===t){const n=M(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=U(n,n),pe[e]=t}return M(t,...n)},_JacobianPoint:v},Object.defineProperties(n.utils,{sha256Sync:{configurable:!1,get:()=>M,set(e){M||(M=e)}},hmacSha256Sync:{configurable:!1,get:()=>z,set(e){z||(z=e)}}})},237:(e,n)=>{"use strict";function t(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function r(...e){const n=(e,n)=>t=>e(n(t));return{encode:Array.from(e).reverse().reduce(((e,t)=>e?n(e,t.encode):t.encode),void 0),decode:e.reduce(((e,t)=>e?n(e,t.decode):t.decode),void 0)}}function o(e){return{encode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("alphabet.encode input should be an array of numbers");return n.map((n=>{if(t(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]}))},decode:n=>{if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("alphabet.decode input should be array of strings");return n.map((n=>{if("string"!=typeof n)throw new Error(`alphabet.decode: not string element=${n}`);const t=e.indexOf(n);if(-1===t)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return t}))}}}function i(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:n=>{if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("join.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return n.join(e)},decode:n=>{if("string"!=typeof n)throw new Error("join.decode input should be string");return n.split(e)}}}function s(e,n="="){if(t(e),"string"!=typeof n)throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;t.length*e%8;)t.push(n);return t},decode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=t.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&t[r-1]===n;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,r)}}}function a(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:n=>e(n)}}function c(e,n,r){if(n<2)throw new Error(`convertRadix: wrong from=${n}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let o=0;const i=[],s=Array.from(e);for(s.forEach((e=>{if(t(e),e<0||e>=n)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,t=!0;for(let i=o;i<s.length;i++){const a=s[i],c=n*e+a;if(!Number.isSafeInteger(c)||n*e/n!==e||c-a!=n*e)throw new Error("convertRadix: carry overflow");if(e=c%r,s[i]=Math.floor(c/r),!Number.isSafeInteger(s[i])||s[i]*r+e!==c)throw new Error("convertRadix: carry overflow");t&&(s[i]?t=!1:o=i)}if(i.push(e),t)break}for(let n=0;n<e.length-1&&0===e[n];n++)i.push(0);return i.reverse()}Object.defineProperty(n,"__esModule",{value:!0}),n.bytes=n.stringToBytes=n.str=n.bytesToString=n.hex=n.utf8=n.bech32m=n.bech32=n.base58check=n.base58xmr=n.base58xrp=n.base58flickr=n.base58=n.base64url=n.base64=n.base32crockford=n.base32hex=n.base32=n.base16=n.utils=n.assertNumber=void 0,n.assertNumber=t;const u=(e,n)=>n?u(n,e%n):e,l=(e,n)=>e+(n-u(e,n));function h(e,n,r,o){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(n<=0||n>32)throw new Error(`convertRadix2: wrong from=${n}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(l(n,r)>32)throw new Error(`convertRadix2: carry overflow from=${n} to=${r} carryBits=${l(n,r)}`);let i=0,s=0;const a=2**r-1,c=[];for(const o of e){if(t(o),o>=2**n)throw new Error(`convertRadix2: invalid data word=${o} from=${n}`);if(i=i<<n|o,s+n>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${n}`);for(s+=n;s>=r;s-=r)c.push((i>>s-r&a)>>>0);i&=2**s-1}if(i=i<<r-s&a,!o&&s>=n)throw new Error("Excess padding");if(!o&&i)throw new Error(`Non-zero padding: ${i}`);return o&&s>0&&c.push(i>>>0),c}function f(e){return t(e),{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(n),256,e)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(c(n,e,256))}}}function d(e,n=!1){if(t(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(l(8,e)>32||l(e,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return h(Array.from(t),8,e,!n)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(h(t,e,8,n))}}}function p(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...n){try{return e.apply(null,n)}catch(e){}}}function y(e,n){if(t(e),"function"!=typeof n)throw new Error("checksum fn should be function");return{encode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=n(t).slice(0,e),o=new Uint8Array(t.length+e);return o.set(t),o.set(r,t.length),o},decode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=t.slice(0,-e),o=n(r).slice(0,e),i=t.slice(-e);for(let n=0;n<e;n++)if(o[n]!==i[n])throw new Error("Invalid checksum");return r}}}n.utils={alphabet:o,chain:r,checksum:y,radix:f,radix2:d,join:i,padding:s},n.base16=r(d(4),o("0123456789ABCDEF"),i("")),n.base32=r(d(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),i("")),n.base32hex=r(d(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),i("")),n.base32crockford=r(d(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),i(""),a((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),n.base64=r(d(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),i("")),n.base64url=r(d(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),i(""));const g=e=>r(f(58),o(e),i(""));n.base58=g("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),n.base58flickr=g("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),n.base58xrp=g("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const w=[0,2,3,5,6,7,9,10,11];n.base58xmr={encode(e){let t="";for(let r=0;r<e.length;r+=8){const o=e.subarray(r,r+8);t+=n.base58.encode(o).padStart(w[o.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){const o=e.slice(r,r+11),i=w.indexOf(o.length),s=n.base58.decode(o);for(let e=0;e<s.length-i;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}},n.base58check=e=>r(y(4,(n=>e(e(n)))),n.base58);const b=r(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),i("")),m=[996825010,642813549,513874426,1027748829,705979059];function v(e){const n=e>>25;let t=(33554431&e)<<5;for(let e=0;e<m.length;e++)1==(n>>e&1)&&(t^=m[e]);return t}function x(e,n,t=1){const r=e.length;let o=1;for(let n=0;n<r;n++){const t=e.charCodeAt(n);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);o=v(o)^t>>5}o=v(o);for(let n=0;n<r;n++)o=v(o)^31&e.charCodeAt(n);for(let e of n)o=v(o)^e;for(let e=0;e<6;e++)o=v(o);return o^=t,b.encode(h([o%2**30],30,5,!1))}function E(e){const n="bech32"===e?1:734539939,t=d(5),r=t.decode,o=t.encode,i=p(r);function s(e,t=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==t&&e.length>t)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${t})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const o=(e=r).lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=e.slice(0,o),s=e.slice(o+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=b.decode(s).slice(0,-6),c=x(i,a,n);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:i,words:a}}return{encode:function(e,t,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof t);const o=e.length+7+t.length;if(!1!==r&&o>r)throw new TypeError(`Length ${o} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${b.encode(t)}${x(e,t,n)}`},decode:s,decodeToBytes:function(e){const{prefix:n,words:t}=s(e,!1);return{prefix:n,words:t,bytes:r(t)}},decodeUnsafe:p(s),fromWords:r,fromWordsUnsafe:i,toWords:o}}n.bech32=E("bech32"),n.bech32m=E("bech32m"),n.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},n.hex=r(d(4),o("0123456789abcdef"),i(""),a((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const A={utf8:n.utf8,hex:n.hex,base16:n.base16,base32:n.base32,base64:n.base64,base64url:n.base64url,base58:n.base58,base58xmr:n.base58xmr},S=`Invalid encoding type. Available types: ${Object.keys(A).join(", ")}`;n.bytesToString=(e,n)=>{if("string"!=typeof e||!A.hasOwnProperty(e))throw new TypeError(S);if(!(n instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return A[e].encode(n)},n.str=n.bytesToString,n.stringToBytes=(e,n)=>{if(!A.hasOwnProperty(e))throw new TypeError(S);if("string"!=typeof n)throw new TypeError("stringToBytes() expects string");return A[e].decode(n)},n.bytes=n.stringToBytes},796:(e,n,t)=>{"use strict";n.OI=n.oy=n.OF=void 0;const r=t(525),o=t(179),i=t(53),s=t(540),a=t(64),c=t(237);function u(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function l(e){const n=u(e),t=n.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:n,words:t}}function h(e){r.default.bytes(e,16,20,24,28,32)}n.OF=function(e,n=128){if(r.default.number(n),n%32!=0||n>256)throw new TypeError("Invalid entropy");return function(e,n){return h(e),d(n).encode(e).join((e=>"あいこくしん"===e[0])(n)?"　":" ")}((0,a.randomBytes)(n/8),e)};const f=e=>{const n=8-e.length/4;return new Uint8Array([(0,i.sha256)(e)[0]>>n<<n])};function d(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Worlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),c.utils.chain(c.utils.checksum(1,f),c.utils.radix2(11,!0),c.utils.alphabet(e))}n.oy=function(e,n){const{words:t}=l(e),r=d(n).decode(t);return h(r),r};n.OI=function(e,n=""){return(0,o.pbkdf2Async)(s.sha512,l(e).nfkd,(e=>u(`mnemonic${e}`))(n),{c:2048,dkLen:64})}},50:(e,n)=>{"use strict";n.U=void 0,n.U="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n")},166:e=>{"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),t=0;t<n.length;t++)n[t]=255;for(var r=0;r<e.length;r++){var o=e.charAt(r),i=o.charCodeAt(0);if(255!==n[i])throw new TypeError(o+" is ambiguous");n[i]=r}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var t=0,r=0,o=0;e[t]===a;)r++,t++;for(var i=(e.length-t)*c+1>>>0,u=new Uint8Array(i);e[t];){var l=n[e.charCodeAt(t)];if(255===l)return;for(var h=0,f=i-1;(0!==l||h<o)&&-1!==f;f--,h++)l+=s*u[f]>>>0,u[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=h,t++}for(var d=i-o;d!==i&&0===u[d];)d++;for(var p=new Uint8Array(r+(i-d)),y=r;d!==i;)p[y++]=u[d++];return p}return{encode:function(n){if(n instanceof Uint8Array||(ArrayBuffer.isView(n)?n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength):Array.isArray(n)&&(n=Uint8Array.from(n))),!(n instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===n.length)return"";for(var t=0,r=0,o=0,i=n.length;o!==i&&0===n[o];)o++,t++;for(var c=(i-o)*u+1>>>0,l=new Uint8Array(c);o!==i;){for(var h=n[o],f=0,d=c-1;(0!==h||f<r)&&-1!==d;d--,f++)h+=256*l[d]>>>0,l[d]=h%s>>>0,h=h/s>>>0;if(0!==h)throw new Error("Non-zero carry");r=f,o++}for(var p=c-r;p!==c&&0===l[p];)p++;for(var y=a.repeat(t);p<c;++p)y+=e.charAt(l[p]);return y},decodeUnsafe:l,decode:function(e){var n=l(e);if(n)return n;throw new Error("Non-base"+s+" character")}}}},766:(e,n)=>{"use strict";n.byteLength=function(e){var n=a(e),t=n[0],r=n[1];return 3*(t+r)/4-r},n.toByteArray=function(e){var n,t,i=a(e),s=i[0],c=i[1],u=new o(function(e,n,t){return 3*(n+t)/4-t}(0,s,c)),l=0,h=c>0?s-4:s;for(t=0;t<h;t+=4)n=r[e.charCodeAt(t)]<<18|r[e.charCodeAt(t+1)]<<12|r[e.charCodeAt(t+2)]<<6|r[e.charCodeAt(t+3)],u[l++]=n>>16&255,u[l++]=n>>8&255,u[l++]=255&n;return 2===c&&(n=r[e.charCodeAt(t)]<<2|r[e.charCodeAt(t+1)]>>4,u[l++]=255&n),1===c&&(n=r[e.charCodeAt(t)]<<10|r[e.charCodeAt(t+1)]<<4|r[e.charCodeAt(t+2)]>>2,u[l++]=n>>8&255,u[l++]=255&n),u},n.fromByteArray=function(e){for(var n,r=e.length,o=r%3,i=[],s=16383,a=0,u=r-o;a<u;a+=s)i.push(c(e,a,a+s>u?u:a+s));return 1===o?(n=e[r-1],i.push(t[n>>2]+t[n<<4&63]+"==")):2===o&&(n=(e[r-2]<<8)+e[r-1],i.push(t[n>>10]+t[n>>4&63]+t[n<<2&63]+"=")),i.join("")};for(var t=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)t[s]=i[s],r[i.charCodeAt(s)]=s;function a(e){var n=e.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return-1===t&&(t=n),[t,t===n?0:4-t%4]}function c(e,n,r){for(var o,i,s=[],a=n;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(t[(i=o)>>18&63]+t[i>>12&63]+t[i>>6&63]+t[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},22:(e,n,t)=>{const r=t(166);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},98:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.c32ToB58=n.b58ToC32=n.c32addressDecode=n.c32address=n.versions=void 0;const r=t(392),o=t(716),i=t(64);n.versions={mainnet:{p2pkh:22,p2sh:20},testnet:{p2pkh:26,p2sh:21}};const s={};s[0]=n.versions.mainnet.p2pkh,s[5]=n.versions.mainnet.p2sh,s[111]=n.versions.testnet.p2pkh,s[196]=n.versions.testnet.p2sh;const a={};function c(e,n){if(!n.match(/^[0-9a-fA-F]{40}$/))throw new Error("Invalid argument: not a hash160 hex string");return`S${(0,r.c32checkEncode)(e,n)}`}function u(e){if(e.length<=5)throw new Error("Invalid c32 address: invalid length");if("S"!=e[0])throw new Error('Invalid c32 address: must start with "S"');return(0,r.c32checkDecode)(e.slice(1))}a[n.versions.mainnet.p2pkh]=0,a[n.versions.mainnet.p2sh]=5,a[n.versions.testnet.p2pkh]=111,a[n.versions.testnet.p2sh]=196,n.c32address=c,n.c32addressDecode=u,n.b58ToC32=function(e,n=-1){const t=o.decode(e),r=(0,i.bytesToHex)(t.data),a=parseInt((0,i.bytesToHex)(t.prefix),16);let u;return n<0?(u=a,void 0!==s[a]&&(u=s[a])):u=n,c(u,r)},n.c32ToB58=function(e,n=-1){const t=u(e),r=t[0],i=t[1];let s;n<0?(s=r,void 0!==a[r]&&(s=a[r])):s=n;let c=s.toString(16);return 1===c.length&&(c=`0${c}`),o.encode(i,c)}},716:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.decode=n.encode=void 0;const r=t(53),o=t(64),i=t(166),s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";n.encode=function(e,n="00"){const t="string"==typeof e?(0,o.hexToBytes)(e):e,a="string"==typeof n?(0,o.hexToBytes)(n):e;if(!(t instanceof Uint8Array&&a instanceof Uint8Array))throw new TypeError("Argument must be of type Uint8Array or string");const c=(0,r.sha256)((0,r.sha256)(new Uint8Array([...a,...t])));return i(s).encode([...a,...t,...c.slice(0,4)])},n.decode=function(e){const n=i(s).decode(e),t=n.slice(0,1),o=n.slice(1,-4),a=(0,r.sha256)((0,r.sha256)(new Uint8Array([...t,...o])));return n.slice(-4).forEach(((e,n)=>{if(e!==a[n])throw new Error("Invalid checksum")})),{prefix:t,data:o}}},392:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.c32checkDecode=n.c32checkEncode=void 0;const r=t(53),o=t(64),i=t(103);function s(e){const n=(0,r.sha256)((0,r.sha256)((0,o.hexToBytes)(e)));return(0,o.bytesToHex)(n.slice(0,4))}n.c32checkEncode=function(e,n){if(e<0||e>=32)throw new Error("Invalid version (must be between 0 and 31)");if(!n.match(/^[0-9a-fA-F]*$/))throw new Error("Invalid data (not a hex string)");(n=n.toLowerCase()).length%2!=0&&(n=`0${n}`);let t=e.toString(16);1===t.length&&(t=`0${t}`);const r=s(`${t}${n}`),o=(0,i.c32encode)(`${n}${r}`);return`${i.c32[e]}${o}`},n.c32checkDecode=function(e){e=(0,i.c32normalize)(e);const n=(0,i.c32decode)(e.slice(1)),t=e[0],r=i.c32.indexOf(t),o=n.slice(-8);let a=r.toString(16);if(1===a.length&&(a=`0${a}`),s(`${a}${n.substring(0,n.length-8)}`)!==o)throw new Error("Invalid c32check string: checksum mismatch");return[r,n.substring(0,n.length-8)]}},103:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.c32decode=n.c32normalize=n.c32encode=n.c32=void 0;const r=t(64);n.c32="0123456789ABCDEFGHJKMNPQRSTVWXYZ";const o="0123456789abcdef";function i(e){return e.toUpperCase().replace(/O/g,"0").replace(/L|I/g,"1")}n.c32encode=function(e,t){if(!e.match(/^[0-9a-fA-F]*$/))throw new Error("Not a hex-encoded string");e.length%2!=0&&(e=`0${e}`);let i=[],s=0;for(let t=(e=e.toLowerCase()).length-1;t>=0;t--)if(s<4){const r=o.indexOf(e[t])>>s;let a=0;0!==t&&(a=o.indexOf(e[t-1]));const c=1+s,u=a%(1<<c)<<5-c,l=n.c32[r+u];s=c,i.unshift(l)}else s=0;let a=0;for(let e=0;e<i.length&&"0"===i[e];e++)a++;i=i.slice(a);const c=(new TextDecoder).decode((0,r.hexToBytes)(e)).match(/^\u0000*/),u=c?c[0].length:0;for(let e=0;e<u;e++)i.unshift(n.c32[0]);if(t){const e=t-i.length;for(let t=0;t<e;t++)i.unshift(n.c32[0])}return i.join("")},n.c32normalize=i,n.c32decode=function(e,t){if(!(e=i(e)).match(`^[${n.c32}]*$`))throw new Error("Not a c32-encoded string");const r=e.match(`^${n.c32[0]}*`),s=r?r[0].length:0;let a=[],c=0,u=0;for(let t=e.length-1;t>=0;t--){4===u&&(a.unshift(o[c]),u=0,c=0);const r=(n.c32.indexOf(e[t])<<u)+c,i=o[r%16];if(u+=1,c=r>>4,c>1<<u)throw new Error("Panic error in decoding.");a.unshift(i)}a.unshift(o[c]),a.length%2==1&&a.unshift("0");let l=0;for(let e=0;e<a.length&&"0"===a[e];e++)l++;a=a.slice(l-l%2);let h=a.join("");for(let e=0;e<s;e++)h=`00${h}`;if(t){const e=2*t-h.length;for(let n=0;n<e;n+=2)h=`00${h}`}return h}},870:(e,n,t)=>{"use strict";n.H4=void 0;t(103),t(392);const r=t(98);Object.defineProperty(n,"H4",{enumerable:!0,get:function(){return r.c32address}})},959:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.decode=n.encode=n.unescape=n.escape=n.pad=void 0;const r=t(766);function o(e){return`${e}${"=".repeat(4-(e.length%4||4))}`}function i(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(e){return o(e).replace(/-/g,"+").replace(/_/g,"/")}n.pad=o,n.escape=i,n.unescape=s,n.encode=function(e){return i((0,r.fromByteArray)((new TextEncoder).encode(e)))},n.decode=function(e){return(new TextDecoder).decode((0,r.toByteArray)(o(s(e))))}},996:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cryptoClients=n.SECP256K1Client=void 0;const r=t(869);Object.defineProperty(n,"SECP256K1Client",{enumerable:!0,get:function(){return r.SECP256K1Client}});const o={ES256K:r.SECP256K1Client};n.cryptoClients=o},869:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SECP256K1Client=void 0;const r=t(377),o=t(53),i=t(698),s=t(575),a=t(643),c=t(64);i.utils.hmacSha256Sync=(e,...n)=>{const t=r.hmac.create(o.sha256,e);return n.forEach((e=>t.update(e))),t.digest()};class u{static derivePublicKey(e,n=!0){return 66===e.length&&(e=e.slice(0,64)),e.length<64&&(e=e.padStart(64,"0")),(0,c.bytesToHex)(i.getPublicKey(e,n))}static signHash(e,n,t="jose"){if(!e||!n)throw new a.MissingParametersError("a signing input hash and private key are all required");const r=i.signSync(e,n.slice(0,64),{der:!0,canonical:!1});if("der"===t)return(0,c.bytesToHex)(r);if("jose"===t)return(0,s.derToJose)(r,"ES256");throw Error("Invalid signature format")}static loadSignature(e){return(0,s.joseToDer)(e,"ES256")}static verifyHash(e,n,t){if(!e||!n||!t)throw new a.MissingParametersError("a signing input hash, der signature, and public key are all required");return i.verify(n,e,t,{strict:!1})}}n.SECP256K1Client=u,u.algorithmName="ES256K"},874:function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}c((r=r.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.hashSha256Async=n.hashSha256=void 0;const o=t(53);function i(e){return(0,o.sha256)(e)}n.hashSha256=i,n.hashSha256Async=function(e){return r(this,void 0,void 0,(function*(){try{if("undefined"!=typeof crypto&&void 0!==crypto.subtle){const n="string"==typeof e?(new TextEncoder).encode(e):e,t=yield crypto.subtle.digest("SHA-256",n);return new Uint8Array(t)}{const n=t(812);if(!n.createHash)throw new Error("`crypto` module does not contain `createHash`");return Promise.resolve(n.createHash("sha256").update(e).digest())}}catch(n){return console.log(n),console.log('Crypto lib not found. Neither the global `crypto.subtle` Web Crypto API, nor the or the Node.js `require("crypto").createHash` module is available. Falling back to JS implementation.'),Promise.resolve(i(e))}}))}},917:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.decodeToken=void 0;const r=t(959);n.decodeToken=function(e){if("string"==typeof e){const n=e.split(".");return{header:JSON.parse(r.decode(n[0])),payload:JSON.parse(r.decode(n[1])),signature:n[2]}}if("object"==typeof e){if("string"!=typeof e.payload)throw new Error("Expected token payload to be a base64 or json string");let n=e.payload;"{"!==e.payload[0]&&(n=r.decode(n));const t=[];return e.header.map((e=>{const n=JSON.parse(r.decode(e));t.push(n)})),{header:t,payload:JSON.parse(n),signature:e.signature}}}},575:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.joseToDer=n.derToJose=void 0;const r=t(766),o=t(959);function i(e){return(e/8|0)+(e%8==0?0:1)}const s={ES256:i(256),ES384:i(384),ES512:i(521)};function a(e){const n=s[e];if(n)return n;throw new Error(`Unknown algorithm "${e}"`)}const c=128;function u(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return(0,r.toByteArray)((0,o.pad)(e));throw new TypeError("ECDSA signature must be a Base64 string or a Uint8Array")}function l(e,n,t){let r=0;for(;n+r<t&&0===e[n+r];)++r;return e[n+r]>=c&&--r,r}n.derToJose=function(e,n){const t=u(e),i=a(n),s=i+1,c=t.length;let l=0;if(48!==t[l++])throw new Error('Could not find expected "seq"');let h=t[l++];if(129===h&&(h=t[l++]),c-l<h)throw new Error(`"seq" specified length of "${h}", only "${c-l}" remaining`);if(2!==t[l++])throw new Error('Could not find expected "int" for "r"');const f=t[l++];if(c-l-2<f)throw new Error(`"r" specified length of "${f}", only "${c-l-2}" available`);if(s<f)throw new Error(`"r" specified length of "${f}", max of "${s}" is acceptable`);const d=l;if(l+=f,2!==t[l++])throw new Error('Could not find expected "int" for "s"');const p=t[l++];if(c-l!==p)throw new Error(`"s" specified length of "${p}", expected "${c-l}"`);if(s<p)throw new Error(`"s" specified length of "${p}", max of "${s}" is acceptable`);const y=l;if(l+=p,l!==c)throw new Error(`Expected to consume entire array, but "${c-l}" bytes remain`);const g=i-f,w=i-p,b=new Uint8Array(g+f+w+p);for(l=0;l<g;++l)b[l]=0;b.set(t.subarray(d+Math.max(-g,0),d+f),l),l=i;for(const e=l;l<e+w;++l)b[l]=0;return b.set(t.subarray(y+Math.max(-w,0),y+p),l),(0,o.escape)((0,r.fromByteArray)(b))},n.joseToDer=function(e,n){e=u(e);const t=a(n),r=e.length;if(r!==2*t)throw new TypeError(`"${n}" signatures must be "${2*t}" bytes, saw "${r}"`);const o=l(e,0,t),i=l(e,t,e.length),s=t-o,h=t-i,f=2+s+1+1+h,d=f<c,p=new Uint8Array((d?2:3)+f);let y=0;return p[y++]=48,d?p[y++]=f:(p[y++]=129,p[y++]=255&f),p[y++]=2,p[y++]=s,o<0?(p[y++]=0,p.set(e.subarray(0,t),y),y+=t):(p.set(e.subarray(o,t),y),y+=t-o),p[y++]=2,p[y++]=h,i<0?(p[y++]=0,p.set(e.subarray(t),y)):p.set(e.subarray(t+i),y),p}},643:(e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.InvalidTokenError=n.MissingParametersError=void 0;class t extends Error{constructor(e){super(),this.name="MissingParametersError",this.message=e||""}}n.MissingParametersError=t;class r extends Error{constructor(e){super(),this.name="InvalidTokenError",this.message=e||""}}n.InvalidTokenError=r},474:function(e,n,t){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t);var o=Object.getOwnPropertyDescriptor(n,t);o&&!("get"in o?!n.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(e,r,o)}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),o=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||r(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),o(t(650),n),o(t(458),n),o(t(917),n),o(t(643),n),o(t(996),n)},650:function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}c((r=r.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenSigner=n.createUnsecuredToken=void 0;const o=t(959),i=t(996),s=t(643),a=t(874);function c(e,n){const t=[],r=o.encode(JSON.stringify(n));t.push(r);const i=o.encode(JSON.stringify(e));return t.push(i),t.join(".")}n.createUnsecuredToken=function(e){return c(e,{typ:"JWT",alg:"none"})+"."},n.TokenSigner=class{constructor(e,n){if(!e||!n)throw new s.MissingParametersError("a signing algorithm and private key are required");if("string"!=typeof e)throw new Error("signing algorithm parameter must be a string");if(e=e.toUpperCase(),!i.cryptoClients.hasOwnProperty(e))throw new Error("invalid signing algorithm");this.tokenType="JWT",this.cryptoClient=i.cryptoClients[e],this.rawPrivateKey=n}header(e={}){const n={typ:this.tokenType,alg:this.cryptoClient.algorithmName};return Object.assign({},n,e)}sign(e,n=!1,t={}){const r=this.header(t),o=c(e,r),i=(0,a.hashSha256)(o);return this.createWithSignedHash(e,n,r,o,i)}signAsync(e,n=!1,t={}){return r(this,void 0,void 0,(function*(){const r=this.header(t),o=c(e,r),i=yield(0,a.hashSha256Async)(o);return this.createWithSignedHash(e,n,r,o,i)}))}createWithSignedHash(e,n,t,r,i){const s=this.cryptoClient.signHash(i,this.rawPrivateKey);return n?{header:[o.encode(JSON.stringify(t))],payload:JSON.stringify(e),signature:[s]}:[r,s].join(".")}}},458:(e,n,t)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TokenVerifier=void 0;const r=t(959),o=t(996),i=t(643),s=t(874);n.TokenVerifier=class{constructor(e,n){if(!e||!n)throw new i.MissingParametersError("a signing algorithm and public key are required");if("string"!=typeof e)throw"signing algorithm parameter must be a string";if(e=e.toUpperCase(),!o.cryptoClients.hasOwnProperty(e))throw"invalid signing algorithm";this.tokenType="JWT",this.cryptoClient=o.cryptoClients[e],this.rawPublicKey=n}verify(e){return"string"==typeof e?this.verifyCompact(e,!1):"object"==typeof e&&this.verifyExpanded(e,!1)}verifyAsync(e){return"string"==typeof e?this.verifyCompact(e,!0):"object"==typeof e?this.verifyExpanded(e,!0):Promise.resolve(!1)}verifyCompact(e,n){const t=e.split("."),r=t[0]+"."+t[1],o=e=>{const n=this.cryptoClient.loadSignature(t[2]);return this.cryptoClient.verifyHash(e,n,this.rawPublicKey)};if(n)return(0,s.hashSha256Async)(r).then((e=>o(e)));{const e=(0,s.hashSha256)(r);return o(e)}}verifyExpanded(e,n){const t=[e.header.join("."),r.encode(e.payload)].join(".");let o=!0;const i=n=>(e.signature.map((e=>{const t=this.cryptoClient.loadSignature(e);this.cryptoClient.verifyHash(n,t,this.rawPublicKey)||(o=!1)})),o);if(n)return(0,s.hashSha256Async)(t).then((e=>i(e)));{const e=(0,s.hashSha256)(t);return i(e)}}}},907:(e,n,t)=>{e=t.nmd(e);var r="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",s="[object Boolean]",a="[object Date]",c="[object Function]",u="[object GeneratorFunction]",l="[object Map]",h="[object Number]",f="[object Object]",d="[object Promise]",p="[object RegExp]",y="[object Set]",g="[object String]",w="[object Symbol]",b="[object WeakMap]",m="[object ArrayBuffer]",v="[object DataView]",x="[object Float32Array]",E="[object Float64Array]",A="[object Int8Array]",S="[object Int16Array]",k="[object Int32Array]",C="[object Uint8Array]",U="[object Uint8ClampedArray]",_="[object Uint16Array]",I="[object Uint32Array]",B=/\w*$/,P=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,T={};T[i]=T["[object Array]"]=T[m]=T[v]=T[s]=T[a]=T[x]=T[E]=T[A]=T[S]=T[k]=T[l]=T[h]=T[f]=T[p]=T[y]=T[g]=T[w]=T[C]=T[U]=T[_]=T[I]=!0,T["[object Error]"]=T[c]=T[b]=!1;var O="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,N="object"==typeof self&&self&&self.Object===Object&&self,$=O||N||Function("return this")(),j=n&&!n.nodeType&&n,K=j&&e&&!e.nodeType&&e,R=K&&K.exports===j;function L(e,n){return e.set(n[0],n[1]),e}function D(e,n){return e.add(n),e}function F(e,n,t,r){var o=-1,i=e?e.length:0;for(r&&i&&(t=e[++o]);++o<i;)t=n(t,e[o],o,e);return t}function M(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(e){}return n}function z(e){var n=-1,t=Array(e.size);return e.forEach((function(e,r){t[++n]=[r,e]})),t}function W(e,n){return function(t){return e(n(t))}}function V(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}var G,q=Array.prototype,J=Function.prototype,Z=Object.prototype,X=$["__core-js_shared__"],Y=(G=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",Q=J.toString,ee=Z.hasOwnProperty,ne=Z.toString,te=RegExp("^"+Q.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=R?$.Buffer:void 0,oe=$.Symbol,ie=$.Uint8Array,se=W(Object.getPrototypeOf,Object),ae=Object.create,ce=Z.propertyIsEnumerable,ue=q.splice,le=Object.getOwnPropertySymbols,he=re?re.isBuffer:void 0,fe=W(Object.keys,Object),de=$e($,"DataView"),pe=$e($,"Map"),ye=$e($,"Promise"),ge=$e($,"Set"),we=$e($,"WeakMap"),be=$e(Object,"create"),me=De(de),ve=De(pe),xe=De(ye),Ee=De(ge),Ae=De(we),Se=oe?oe.prototype:void 0,ke=Se?Se.valueOf:void 0;function Ce(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Ue(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function _e(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Ie(e){this.__data__=new Ue(e)}function Be(e,n,t){var r=e[n];ee.call(e,n)&&Fe(r,t)&&(void 0!==t||n in e)||(e[n]=t)}function Pe(e,n){for(var t=e.length;t--;)if(Fe(e[t][0],n))return t;return-1}function He(e,n,t,r,o,d,b){var P;if(r&&(P=d?r(e,o,d,b):r(e)),void 0!==P)return P;if(!Ge(e))return e;var H=Me(e);if(H){if(P=function(e){var n=e.length,t=e.constructor(n);return n&&"string"==typeof e[0]&&ee.call(e,"index")&&(t.index=e.index,t.input=e.input),t}(e),!n)return function(e,n){var t=-1,r=e.length;for(n||(n=Array(r));++t<r;)n[t]=e[t];return n}(e,P)}else{var O=Ke(e),N=O==c||O==u;if(We(e))return function(e,n){if(n)return e.slice();var t=new e.constructor(e.length);return e.copy(t),t}(e,n);if(O==f||O==i||N&&!d){if(M(e))return d?e:{};if(P=function(e){return"function"!=typeof e.constructor||Le(e)?{}:Ge(n=se(e))?ae(n):{};var n}(N?{}:e),!n)return function(e,n){return Oe(e,je(e),n)}(e,function(e,n){return e&&Oe(n,qe(n),e)}(P,e))}else{if(!T[O])return d?e:{};P=function(e,n,t,r){var o,i=e.constructor;switch(n){case m:return Te(e);case s:case a:return new i(+e);case v:return function(e,n){var t=n?Te(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,r);case x:case E:case A:case S:case k:case C:case U:case _:case I:return function(e,n){var t=n?Te(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(e,r);case l:return function(e,n,t){return F(n?t(z(e),!0):z(e),L,new e.constructor)}(e,r,t);case h:case g:return new i(e);case p:return function(e){var n=new e.constructor(e.source,B.exec(e));return n.lastIndex=e.lastIndex,n}(e);case y:return function(e,n,t){return F(n?t(V(e),!0):V(e),D,new e.constructor)}(e,r,t);case w:return o=e,ke?Object(ke.call(o)):{}}}(e,O,He,n)}}b||(b=new Ie);var $=b.get(e);if($)return $;if(b.set(e,P),!H)var j=t?function(e){return function(e,n,t){var r=n(e);return Me(e)?r:function(e,n){for(var t=-1,r=n.length,o=e.length;++t<r;)e[o+t]=n[t];return e}(r,t(e))}(e,qe,je)}(e):qe(e);return function(e,n){for(var t=-1,r=e?e.length:0;++t<r&&!1!==n(e[t],t););}(j||e,(function(o,i){j&&(o=e[i=o]),Be(P,i,He(o,n,t,r,i,e,b))})),P}function Te(e){var n=new e.constructor(e.byteLength);return new ie(n).set(new ie(e)),n}function Oe(e,n,t,r){t||(t={});for(var o=-1,i=n.length;++o<i;){var s=n[o],a=r?r(t[s],e[s],s,t,e):void 0;Be(t,s,void 0===a?e[s]:a)}return t}function Ne(e,n){var t,r,o=e.__data__;return("string"==(r=typeof(t=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?o["string"==typeof n?"string":"hash"]:o.map}function $e(e,n){var t=function(e,n){return null==e?void 0:e[n]}(e,n);return function(e){return!(!Ge(e)||(n=e,Y&&Y in n))&&(Ve(e)||M(e)?te:P).test(De(e));var n}(t)?t:void 0}Ce.prototype.clear=function(){this.__data__=be?be(null):{}},Ce.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ce.prototype.get=function(e){var n=this.__data__;if(be){var t=n[e];return t===r?void 0:t}return ee.call(n,e)?n[e]:void 0},Ce.prototype.has=function(e){var n=this.__data__;return be?void 0!==n[e]:ee.call(n,e)},Ce.prototype.set=function(e,n){return this.__data__[e]=be&&void 0===n?r:n,this},Ue.prototype.clear=function(){this.__data__=[]},Ue.prototype.delete=function(e){var n=this.__data__,t=Pe(n,e);return!(t<0||(t==n.length-1?n.pop():ue.call(n,t,1),0))},Ue.prototype.get=function(e){var n=this.__data__,t=Pe(n,e);return t<0?void 0:n[t][1]},Ue.prototype.has=function(e){return Pe(this.__data__,e)>-1},Ue.prototype.set=function(e,n){var t=this.__data__,r=Pe(t,e);return r<0?t.push([e,n]):t[r][1]=n,this},_e.prototype.clear=function(){this.__data__={hash:new Ce,map:new(pe||Ue),string:new Ce}},_e.prototype.delete=function(e){return Ne(this,e).delete(e)},_e.prototype.get=function(e){return Ne(this,e).get(e)},_e.prototype.has=function(e){return Ne(this,e).has(e)},_e.prototype.set=function(e,n){return Ne(this,e).set(e,n),this},Ie.prototype.clear=function(){this.__data__=new Ue},Ie.prototype.delete=function(e){return this.__data__.delete(e)},Ie.prototype.get=function(e){return this.__data__.get(e)},Ie.prototype.has=function(e){return this.__data__.has(e)},Ie.prototype.set=function(e,n){var t=this.__data__;if(t instanceof Ue){var r=t.__data__;if(!pe||r.length<199)return r.push([e,n]),this;t=this.__data__=new _e(r)}return t.set(e,n),this};var je=le?W(le,Object):function(){return[]},Ke=function(e){return ne.call(e)};function Re(e,n){return!!(n=null==n?o:n)&&("number"==typeof e||H.test(e))&&e>-1&&e%1==0&&e<n}function Le(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||Z)}function De(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fe(e,n){return e===n||e!=e&&n!=n}(de&&Ke(new de(new ArrayBuffer(1)))!=v||pe&&Ke(new pe)!=l||ye&&Ke(ye.resolve())!=d||ge&&Ke(new ge)!=y||we&&Ke(new we)!=b)&&(Ke=function(e){var n=ne.call(e),t=n==f?e.constructor:void 0,r=t?De(t):void 0;if(r)switch(r){case me:return v;case ve:return l;case xe:return d;case Ee:return y;case Ae:return b}return n});var Me=Array.isArray;function ze(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!Ve(e)}var We=he||function(){return!1};function Ve(e){var n=Ge(e)?ne.call(e):"";return n==c||n==u}function Ge(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function qe(e){return ze(e)?function(e,n){var t=Me(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&ze(e)}(e)&&ee.call(e,"callee")&&(!ce.call(e,"callee")||ne.call(e)==i)}(e)?function(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}(e.length,String):[],r=t.length,o=!!r;for(var s in e)!n&&!ee.call(e,s)||o&&("length"==s||Re(s,r))||t.push(s);return t}(e):function(e){if(!Le(e))return fe(e);var n=[];for(var t in Object(e))ee.call(e,t)&&"constructor"!=t&&n.push(t);return n}(e)}e.exports=function(e){return He(e,!0,!0)}},300:(e,n,t)=>{"use strict";e.exports=t(613)},613:(e,n)=>{"use strict";function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function r(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,void 0):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function o(e,n){return void 0===n&&(n="{$origin}\n{$ttl}\n\n; SOA Record\n{name} {ttl}    IN  SOA {mname}{rname}(\n{serial} ;serial\n{refresh} ;refresh\n{retry} ;retry\n{expire} ;expire\n{minimum} ;minimum ttl\n)\n\n; NS Records\n{ns}\n\n; MX Records\n{mx}\n\n; A Records\n{a}\n\n; AAAA Records\n{aaaa}\n\n; CNAME Records\n{cname}\n\n; PTR Records\n{ptr}\n\n; TXT Records\n{txt}\n\n; SRV Records\n{srv}\n\n; SPF Records\n{spf}\n\n; URI Records\n{uri}\n"),n=function(e,n){var t="";return void 0!==e&&(t+="$ORIGIN "+e),n.replace("{$origin}",t)}(e.$origin,n),n=function(e,n){var t="";return void 0!==e&&(t+="$TTL "+e),n.replace("{$ttl}",t)}(e.$ttl,n),n=function(e,n){var t=n;if(void 0!==e)for(var r in e.name=e.name||"@",e.ttl=e.ttl||"",e)t=t.replace("{"+r+"}",e[r]+"\t");return t}(e.soa,n),n=function(e,n){var t="";if(e)for(var o,i=r(e);!(o=i()).done;){var s=o.value;t+=(s.name||"@")+"\t",s.ttl&&(t+=s.ttl+"\t"),t+="IN\tNS\t"+s.host+"\n"}return n.replace("{ns}",t)}(e.ns,n),n=function(e,n){var t="";if(e)for(var o,i=r(e);!(o=i()).done;){var s=o.value;t+=(s.name||"@")+"\t",s.ttl&&(t+=s.ttl+"\t"),t+="IN\tA\t"+s.ip+"\n"}return n.replace("{a}",t)}(e.a,n),n=function(e,n){var t="";if(e)for(var o,i=r(e);!(o=i()).done;){var s=o.value;t+=(s.name||"@")+"\t",s.ttl&&(t+=s.ttl+"\t"),t+="IN\tAAAA\t"+s.ip+"\n"}return n.replace("{aaaa}",t)}(e.aaaa,n),n=function(e,n){var t="";if(e)for(var o,i=r(e);!(o=i()).done;){var s=o.value;t+=(s.name||"@")+"\t",s.ttl&&(t+=s.ttl+"\t"),t+="IN\tCNAME\t"+s.alias+"\n"}return n.replace("{cname}",t)}(e.cname,n),n=function(e,n){var t="";if(e)for(var o,i=r(e);!(o=i()).done;){var s=o.value;t+=(s.name||"@")+"\t",s.ttl&&(t+=s.ttl+"\t"),t+="IN\tMX\t"+s.preference+"\t"+s.host+"\n"}return n.replace("{mx}",t)}(e.mx,n),n=function(e,n){var t="";if(e)for(var o,i=r(e);!(o=i()).done;){var s=o.value;t+=(s.name||"@")+"\t",s.ttl&&(t+=s.ttl+"\t"),t+="IN\tPTR\t"+s.host+"\n"}return n.replace("{ptr}",t)}(e.ptr,n),n=function(e,n){var t="";if(e)for(var o,i=r(e);!(o=i()).done;){var s=o.value;t+=(s.name||"@")+"\t",s.ttl&&(t+=s.ttl+"\t"),t+="IN\tTXT\t";var a=s.txt;"string"==typeof a?t+='"'+a+'"':a instanceof Array&&(t+=a.map((function(e){return'"'+e+'"'})).join(" ")),t+="\n"}return n.replace("{txt}",t)}(e.txt,n),n=function(e,n){var t="";if(e)for(var o,i=r(e);!(o=i()).done;){var s=o.value;t+=(s.name||"@")+"\t",s.ttl&&(t+=s.ttl+"\t"),t+="IN\tSRV\t"+s.priority+"\t",t+=s.weight+"\t",t+=s.port+"\t",t+=s.target+"\n"}return n.replace("{srv}",t)}(e.srv,n),n=function(e,n){var t="";if(e)for(var o,i=r(e);!(o=i()).done;){var s=o.value;t+=(s.name||"@")+"\t",s.ttl&&(t+=s.ttl+"\t"),t+="IN\tSPF\t"+s.data+"\n"}return n.replace("{spf}",t)}(e.spf,n),(n=function(e,n){n=(n=n.replace("{zone}",e.$origin||!!e.soa&&e.soa.name||"")).replace("{datetime}",(new Date).toISOString());var t=Math.round(Date.now()/1e3);return n.replace("{time}",""+t)}(e,n=function(e,n){var t="";if(e)for(var o,i=r(e);!(o=i()).done;){var s=o.value;t+=(s.name||"@")+"\t",s.ttl&&(t+=s.ttl+"\t"),t+="IN\tURI\t"+s.priority+"\t",t+=s.weight+"\t",t+='"'+s.target+'"\n'}return n.replace("{uri}",t)}(e.uri,n))).replace(/\n{2,}/gim,"\n\n")}function i(e){return function(e){for(var n,t={},o=r(e.split("\n"));!(n=o()).done;){var i=n.value;if(i&&i.trim()){var w=i.toUpperCase();/\s+TXT\s+/.test(w)?(t.txt=t.txt||[],t.txt.push(f(i))):0===w.indexOf("$ORIGIN")?t.$origin=i.split(/\s+/g)[1]:0===w.indexOf("$TTL")?t.$ttl=parseInt(i.split(/\s+/g)[1],10):/\s+SOA\s+/.test(w)?t.soa=s(i):/\s+NS\s+/.test(w)?(t.ns=t.ns||[],t.ns.push(a(i))):/\s+A\s+/.test(w)?(t.a=t.a||[],t.a.push(c(i,t.a))):/\s+AAAA\s+/.test(w)?(t.aaaa=t.aaaa||[],t.aaaa.push(u(i))):/\s+CNAME\s+/.test(w)?(t.cname=t.cname||[],t.cname.push(l(i))):/\s+MX\s+/.test(w)?(t.mx=t.mx||[],t.mx.push(h(i))):/\s+PTR\s+/.test(w)?(t.ptr=t.ptr||[],t.ptr.push(d(i,t.ptr,t.$origin))):/\s+SRV\s+/.test(w)?(t.srv=t.srv||[],t.srv.push(p(i))):/\s+SPF\s+/.test(w)?(t.spf=t.spf||[],t.spf.push(y(i))):/\s+URI\s+/.test(w)&&(t.uri=t.uri||[],t.uri.push(g(i)))}}return t}(e=function(e){for(var n=[],t=/\([\s\S]*?\)/gim,r=t.exec(e);null!==r;){var o=r[0].replace(/\s+/gm," ");n.push({match:r,replacement:o}),r=t.exec(e)}for(var i=e.split(""),s=0,a=n;s<a.length;s++){var c=a[s],u=c.match;i.splice(u.index,u[0].length,c.replacement)}return i.join("").replace(/\(|\)/gim," ")}(e=function(e){return e.replace(/(^|[^\\]);.*/g,(function(e,n){return n||""}))}(e)))}function s(e){var n={},t=e.trim().split(/\s+/g),r=t.length;return n.name=t[0],n.minimum=parseInt(t[r-1],10),n.expire=parseInt(t[r-2],10),n.retry=parseInt(t[r-3],10),n.refresh=parseInt(t[r-4],10),n.serial=parseInt(t[r-5],10),n.rname=t[r-6],n.mname=t[r-7],isNaN(t[1])||(n.ttl=parseInt(t[1],10)),n}function a(e){var n=e.trim().split(/\s+/g),t={name:n[0],host:n[n.length-1]};return isNaN(n[1])||(t.ttl=parseInt(n[1],10)),t}function c(e,n){var t=e.trim().split(/\s+/g),r=e.trim().toUpperCase().split(/\s+/g),o={name:t[0],ip:t[t.length-1]};return 0===r.lastIndexOf("A")&&(o.name=n.length?n[n.length-1].name:"@"),isNaN(t[1])||(o.ttl=parseInt(t[1],10)),o}function u(e){var n=e.trim().split(/\s+/g),t={name:n[0],ip:n[n.length-1]};return isNaN(n[1])||(t.ttl=parseInt(n[1],10)),t}function l(e){var n=e.trim().split(/\s+/g),t={name:n[0],alias:n[n.length-1]};return isNaN(n[1])||(t.ttl=parseInt(n[1],10)),t}function h(e){var n=e.trim().split(/\s+/g),t=n.length,r={name:n[0],preference:parseInt(n[t-2],10),host:n[t-1]};return isNaN(n[1])||(r.ttl=parseInt(n[1],10)),r}function f(e){var n=e.trim().match(/[^\s"']+|"[^"]*"|'[^']*'/g);if(!n)throw new Error("Failure to tokenize TXT record");var t,r=n.length,o=n.indexOf("TXT");function i(e){return e.indexOf('"')>-1&&(e=e.split('"')[1]),e}t=r-o-1>1?[].concat(n.slice(o+1).map(i)):i(n[r-1]);var s={name:n[0],txt:t};return isNaN(n[1])||(s.ttl=parseInt(n[1],10)),s}function d(e,n,t){var r=e.trim().split(/\s+/g);0===e.trim().toUpperCase().split(/\s+/g).lastIndexOf("PTR")&&n[n.length-1]&&r.unshift(n[n.length-1].name);var o={name:r[0],fullname:r[0]+"."+t,host:r[r.length-1]};return isNaN(r[1])||(o.ttl=parseInt(r[1],10)),o}function p(e){var n=e.trim().split(/\s+/g),t=n.length,r={name:n[0],target:n[t-1],priority:parseInt(n[t-4],10),weight:parseInt(n[t-3],10),port:parseInt(n[t-2],10)};return isNaN(n[1])||(r.ttl=parseInt(n[1],10)),r}function y(e){for(var n=e.trim().split(/\s+/g),t={name:n[0],data:""},r=n.length;r-- >4;)t.data=n[r]+" "+t.data.trim();return isNaN(n[1])||(t.ttl=parseInt(n[1],10)),t}function g(e){var n=e.trim().split(/\s+/g),t=n.length,r={name:n[0],target:n[t-1].replace(/"/g,""),priority:parseInt(n[t-3],10),weight:parseInt(n[t-2],10)};return isNaN(n[1])||(r.ttl=parseInt(n[1],10)),r}(function(){var e=function(e){this.jsonZoneFile="object"==typeof e?JSON.parse(JSON.stringify(e)):"string"==typeof e?i(e):void 0}.prototype;e.toJSON=function(){return this.jsonZoneFile},e.toString=function(){return o(this.toJSON())}})(),n.parseZoneFile=i},314:()=>{},695:()=>{},812:()=>{},516:()=>{}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return o.d(n,{a:n}),n},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(t,r){if(1&r&&(t=this(t)),8&r)return t;if("object"==typeof t&&t){if(4&r&&t.__esModule)return t;if(16&r&&"function"==typeof t.then)return t}var i=Object.create(null);o.r(i);var s={};e=e||[null,n({}),n([]),n(n)];for(var a=2&r&&t;"object"==typeof a&&!~e.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>t[e]));return s.default=()=>t,o.d(i,s),i},o.d=(e,n)=>{for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};return(()=>{"use strict";o.r(i),o.d(i,{DEFAULT_PROFILE:()=>Oo,DEFAULT_PROFILE_FILE_NAME:()=>No,DerivationType:()=>Kr,HARDENED_OFFSET:()=>xr,assertIsTruthy:()=>Ur,connectToGaiaHubWithConfig:()=>Br,createWalletGaiaConfig:()=>yo,deriveAccount:()=>Vr,deriveConfigPrivateKey:()=>Nr,deriveDataPrivateKey:()=>Wr,deriveLegacyConfigPrivateKey:()=>$r,derivePrivateKeyByType:()=>Mr,deriveSalt:()=>jr,deriveStxPrivateKey:()=>zr,deriveWalletKeys:()=>Or,encryptWalletConfig:()=>vo,fetchAccountProfileUrl:()=>jo,fetchLegacyWalletConfig:()=>ao,fetchProfileFromUrl:()=>$o,fetchUsernameForAccountByDerivationType:()=>Fr,fetchWalletConfig:()=>wo,generateNewAccount:()=>io,generateSecretKey:()=>ro,generateWallet:()=>oo,getAccountDisplayName:()=>Zo,getAppPrivateKey:()=>Xo,getGaiaAddress:()=>Er,getHubInfo:()=>Ir,getOrCreateWalletConfig:()=>go,getProfileURLFromZoneFile:()=>_r,getRootNode:()=>Ar,getStxAddress:()=>Jo,makeAuthResponse:()=>Yo,makeGaiaAssociationToken:()=>Pr,makeWalletConfig:()=>mo,randomSeedPhrase:()=>to,restoreWalletAccounts:()=>Po,selectStxDerivation:()=>Rr,signAndUploadProfile:()=>Lo,signProfileForUpload:()=>Ko,updateWalletConfig:()=>bo,updateWalletConfigWithApp:()=>xo,uploadProfile:()=>Ro,whenChainId:()=>Hr});var e=o(796),n=o(50);function t(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e,...n){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(n.length>0&&!n.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}const s={number:t,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:r,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");t(e.outputLen),t(e.blockLen)},exists:function(e,n=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(n&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,n){r(e);const t=n.outputLen;if(e.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}},a=("object"==typeof self&&"crypto"in self&&self.crypto,e=>new DataView(e.buffer,e.byteOffset,e.byteLength)),c=(e,n)=>e<<32-n|e>>>n;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const u=Array.from({length:256},((e,n)=>n.toString(16).padStart(2,"0")));function l(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function h(e){if("string"==typeof e&&(e=l(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function f(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const n=e.reduce(((e,n)=>e+n.length),0),t=new Uint8Array(n);for(let n=0,r=0;n<e.length;n++){const o=e[n];t.set(o,r),r+=o.length}return t}class d{clone(){return this._cloneInto()}}function p(e){const n=n=>e().update(h(n)).digest(),t=e();return n.outputLen=t.outputLen,n.blockLen=t.blockLen,n.create=()=>e(),n}class y extends d{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,s.hash(e);const t=h(n);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(t.length>r?e.create().update(t).digest():t);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return s.exists(this),this.iHash.update(e),this}digestInto(e){s.exists(this),s.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:t,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=n._cloneInto(e.oHash),e.iHash=t._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const g=(e,n,t)=>new y(e,n).update(t).digest();g.create=(e,n)=>new y(e,n);class w extends d{constructor(e,n,t,r){super(),this.blockLen=e,this.outputLen=n,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=a(this.buffer)}update(e){s.exists(this);const{view:n,buffer:t,blockLen:r}=this,o=(e=h(e)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)t.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(n,0),this.pos=0);else{const n=a(e);for(;r<=o-i;i+=r)this.process(n,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){s.exists(this),s.output(e,this),this.finished=!0;const{buffer:n,view:t,blockLen:r,isLE:o}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(t,0),i=0);for(let e=i;e<r;e++)n[e]=0;!function(e,n,t,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(n,t,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(t>>o&i),a=Number(t&i),c=r?4:0,u=r?0:4;e.setUint32(n+c,s,r),e.setUint32(n+u,a,r)}(t,r-8,BigInt(8*this.length),o),this.process(t,0);const c=a(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,h=this.get();if(l>h.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)c.setUint32(4*e,h[e],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const t=e.slice(0,n);return this.destroy(),t}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:t,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%n&&e.buffer.set(t),e}}const b=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),m=Uint8Array.from({length:16},((e,n)=>n)),v=m.map((e=>(9*e+5)%16));let x=[m],E=[v];for(let e=0;e<4;e++)for(let n of[x,E])n.push(n[e].map((e=>b[e])));const A=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),S=x.map(((e,n)=>e.map((e=>A[n][e])))),k=E.map(((e,n)=>e.map((e=>A[n][e])))),C=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),U=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),_=(e,n)=>e<<n|e>>>32-n;function I(e,n,t,r){return 0===e?n^t^r:1===e?n&t|~n&r:2===e?(n|~t)^r:3===e?n&r|t&~r:n^(t|~r)}const B=new Uint32Array(16);class P extends w{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:t,h3:r,h4:o}=this;return[e,n,t,r,o]}set(e,n,t,r,o){this.h0=0|e,this.h1=0|n,this.h2=0|t,this.h3=0|r,this.h4=0|o}process(e,n){for(let t=0;t<16;t++,n+=4)B[t]=e.getUint32(n,!0);let t=0|this.h0,r=t,o=0|this.h1,i=o,s=0|this.h2,a=s,c=0|this.h3,u=c,l=0|this.h4,h=l;for(let e=0;e<5;e++){const n=4-e,f=C[e],d=U[e],p=x[e],y=E[e],g=S[e],w=k[e];for(let n=0;n<16;n++){const r=_(t+I(e,o,s,c)+B[p[n]]+f,g[n])+l|0;t=l,l=c,c=0|_(s,10),s=o,o=r}for(let e=0;e<16;e++){const t=_(r+I(n,i,a,u)+B[y[e]]+d,w[e])+h|0;r=h,h=u,u=0|_(a,10),a=i,i=t}}this.set(this.h1+s+u|0,this.h2+c+h|0,this.h3+l+r|0,this.h4+t+i|0,this.h0+o+a|0)}roundClean(){B.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const H=p((()=>new P)),T=(e,n,t)=>e&n^e&t^n&t,O=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),N=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$=new Uint32Array(64);class j extends w{constructor(){super(64,32,8,!1),this.A=0|N[0],this.B=0|N[1],this.C=0|N[2],this.D=0|N[3],this.E=0|N[4],this.F=0|N[5],this.G=0|N[6],this.H=0|N[7]}get(){const{A:e,B:n,C:t,D:r,E:o,F:i,G:s,H:a}=this;return[e,n,t,r,o,i,s,a]}set(e,n,t,r,o,i,s,a){this.A=0|e,this.B=0|n,this.C=0|t,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,n){for(let t=0;t<16;t++,n+=4)$[t]=e.getUint32(n,!1);for(let e=16;e<64;e++){const n=$[e-15],t=$[e-2],r=c(n,7)^c(n,18)^n>>>3,o=c(t,17)^c(t,19)^t>>>10;$[e]=o+$[e-7]+r+$[e-16]|0}let{A:t,B:r,C:o,D:i,E:s,F:a,G:u,H:l}=this;for(let e=0;e<64;e++){const n=l+(c(s,6)^c(s,11)^c(s,25))+((h=s)&a^~h&u)+O[e]+$[e]|0,f=(c(t,2)^c(t,13)^c(t,22))+T(t,r,o)|0;l=u,u=a,a=s,s=i+n|0,i=o,o=r,r=t,t=n+f|0}var h;t=t+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(t,r,o,i,s,a,u,l)}roundClean(){$.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class K extends j{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const R=p((()=>new j)),L=(p((()=>new K)),BigInt(2**32-1)),D=BigInt(32);function F(e,n=!1){return n?{h:Number(e&L),l:Number(e>>D&L)}:{h:0|Number(e>>D&L),l:0|Number(e&L)}}const M=function(e,n=!1){let t=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:s}=F(e[o],n);[t[o],r[o]]=[i,s]}return[t,r]},z=(e,n,t)=>e>>>t,W=(e,n,t)=>e<<32-t|n>>>t,V=(e,n,t)=>e>>>t|n<<32-t,G=(e,n,t)=>e<<32-t|n>>>t,q=(e,n,t)=>e<<64-t|n>>>t-32,J=(e,n,t)=>e>>>t-32|n<<64-t,Z=function(e,n,t,r){const o=(n>>>0)+(r>>>0);return{h:e+t+(o/2**32|0)|0,l:0|o}},X=(e,n,t)=>(e>>>0)+(n>>>0)+(t>>>0),Y=(e,n,t,r)=>n+t+r+(e/2**32|0)|0,Q=(e,n,t,r)=>(e>>>0)+(n>>>0)+(t>>>0)+(r>>>0),ee=(e,n,t,r,o)=>n+t+r+o+(e/2**32|0)|0,ne=(e,n,t,r,o,i)=>n+t+r+o+i+(e/2**32|0)|0,te=(e,n,t,r,o)=>(e>>>0)+(n>>>0)+(t>>>0)+(r>>>0)+(o>>>0),[re,oe]=M(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),ie=new Uint32Array(80),se=new Uint32Array(80);class ae extends w{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:t,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:f,Gl:d,Hh:p,Hl:y}=this;return[e,n,t,r,o,i,s,a,c,u,l,h,f,d,p,y]}set(e,n,t,r,o,i,s,a,c,u,l,h,f,d,p,y){this.Ah=0|e,this.Al=0|n,this.Bh=0|t,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(e,n){for(let t=0;t<16;t++,n+=4)ie[t]=e.getUint32(n),se[t]=e.getUint32(n+=4);for(let e=16;e<80;e++){const n=0|ie[e-15],t=0|se[e-15],r=V(n,t,1)^V(n,t,8)^z(n,t,7),o=G(n,t,1)^G(n,t,8)^W(n,t,7),i=0|ie[e-2],s=0|se[e-2],a=V(i,s,19)^q(i,s,61)^z(i,s,6),c=G(i,s,19)^J(i,s,61)^W(i,s,6),u=Q(o,c,se[e-7],se[e-16]),l=ee(u,r,a,ie[e-7],ie[e-16]);ie[e]=0|l,se[e]=0|u}let{Ah:t,Al:r,Bh:o,Bl:i,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:h,Fh:f,Fl:d,Gh:p,Gl:y,Hh:g,Hl:w}=this;for(let e=0;e<80;e++){const n=V(l,h,14)^V(l,h,18)^q(l,h,41),b=G(l,h,14)^G(l,h,18)^J(l,h,41),m=l&f^~l&p,v=te(w,b,h&d^~h&y,oe[e],se[e]),x=ne(v,g,n,m,re[e],ie[e]),E=0|v,A=V(t,r,28)^q(t,r,34)^q(t,r,39),S=G(t,r,28)^J(t,r,34)^J(t,r,39),k=t&o^t&s^o&s,C=r&i^r&a^i&a;g=0|p,w=0|y,p=0|f,y=0|d,f=0|l,d=0|h,({h:l,l:h}=Z(0|c,0|u,0|x,0|E)),c=0|s,u=0|a,s=0|o,a=0|i,o=0|t,i=0|r;const U=X(E,S,C);t=Y(U,x,A,k),r=0|U}({h:t,l:r}=Z(0|this.Ah,0|this.Al,0|t,0|r)),({h:o,l:i}=Z(0|this.Bh,0|this.Bl,0|o,0|i)),({h:s,l:a}=Z(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=Z(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:h}=Z(0|this.Eh,0|this.El,0|l,0|h)),({h:f,l:d}=Z(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:y}=Z(0|this.Gh,0|this.Gl,0|p,0|y)),({h:g,l:w}=Z(0|this.Hh,0|this.Hl,0|g,0|w)),this.set(t,r,o,i,s,a,c,u,l,h,f,d,p,y,g,w)}roundClean(){ie.fill(0),se.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class ce extends ae{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class ue extends ae{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class le extends ae{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const he=p((()=>new ae));p((()=>new ce)),p((()=>new ue)),p((()=>new le));var fe=o(314),de=o.t(fe,2);const pe=BigInt(0),ye=BigInt(1),ge=BigInt(2),we=BigInt(3),be=BigInt(8),me=Object.freeze({a:pe,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:ye,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),ve=(e,n)=>(e+n/ge)/n,xe={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n}=me,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ye*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,s=BigInt("0x100000000000000000000000000000000"),a=ve(i*e,n),c=ve(-r*e,n);let u=Ze(e-a*t-c*o,n),l=Ze(-a*r-c*i,n);const h=u>s,f=l>s;if(h&&(u=n-u),f&&(l=n-l),u>s||l>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:h,k1:u,k2neg:f,k2:l}}},Ee=32,Ae=32,Se=32,ke=Ee+1,Ce=2*Ee+1;function Ue(e){const{a:n,b:t}=me,r=Ze(e*e),o=Ze(r*e);return Ze(o+n*e+t)}const _e=me.a===pe;class Ie extends Error{constructor(e){super(e)}}function Be(e){if(!(e instanceof Pe))throw new TypeError("JacobianPoint expected")}class Pe{constructor(e,n,t){this.x=e,this.y=n,this.z=t}static fromAffine(e){if(!(e instanceof Oe))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Oe.ZERO)?Pe.ZERO:new Pe(e.x,e.y,ye)}static toAffineBatch(e){const n=function(e,n=me.P){const t=new Array(e.length),r=Ye(e.reduce(((e,r,o)=>r===pe?e:(t[o]=e,Ze(e*r,n))),ye),n);return e.reduceRight(((e,r,o)=>r===pe?e:(t[o]=Ze(e*t[o],n),Ze(e*r,n))),r),t}(e.map((e=>e.z)));return e.map(((e,t)=>e.toAffine(n[t])))}static normalizeZ(e){return Pe.toAffineBatch(e).map(Pe.fromAffine)}equals(e){Be(e);const{x:n,y:t,z:r}=this,{x:o,y:i,z:s}=e,a=Ze(r*r),c=Ze(s*s),u=Ze(n*c),l=Ze(o*a),h=Ze(Ze(t*s)*c),f=Ze(Ze(i*r)*a);return u===l&&h===f}negate(){return new Pe(this.x,Ze(-this.y),this.z)}double(){const{x:e,y:n,z:t}=this,r=Ze(e*e),o=Ze(n*n),i=Ze(o*o),s=e+o,a=Ze(ge*(Ze(s*s)-r-i)),c=Ze(we*r),u=Ze(c*c),l=Ze(u-ge*a),h=Ze(c*(a-l)-be*i),f=Ze(ge*n*t);return new Pe(l,h,f)}add(e){Be(e);const{x:n,y:t,z:r}=this,{x:o,y:i,z:s}=e;if(o===pe||i===pe)return this;if(n===pe||t===pe)return e;const a=Ze(r*r),c=Ze(s*s),u=Ze(n*c),l=Ze(o*a),h=Ze(Ze(t*s)*c),f=Ze(Ze(i*r)*a),d=Ze(l-u),p=Ze(f-h);if(d===pe)return p===pe?this.double():Pe.ZERO;const y=Ze(d*d),g=Ze(d*y),w=Ze(u*y),b=Ze(p*p-g-ge*w),m=Ze(p*(w-b)-h*g),v=Ze(r*s*d);return new Pe(b,m,v)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const n=Pe.ZERO;if("bigint"==typeof e&&e===pe)return n;let t=Je(e);if(t===ye)return this;if(!_e){let e=n,r=this;for(;t>pe;)t&ye&&(e=e.add(r)),r=r.double(),t>>=ye;return e}let{k1neg:r,k1:o,k2neg:i,k2:s}=xe.splitScalar(t),a=n,c=n,u=this;for(;o>pe||s>pe;)o&ye&&(a=a.add(u)),s&ye&&(c=c.add(u)),u=u.double(),o>>=ye,s>>=ye;return r&&(a=a.negate()),i&&(c=c.negate()),c=new Pe(Ze(c.x*xe.beta),c.y,c.z),a.add(c)}precomputeWindow(e){const n=_e?128/e+1:256/e+1,t=[];let r=this,o=r;for(let i=0;i<n;i++){o=r,t.push(o);for(let n=1;n<2**(e-1);n++)o=o.add(r),t.push(o);r=o.double()}return t}wNAF(e,n){!n&&this.equals(Pe.BASE)&&(n=Oe.BASE);const t=n&&n._WINDOW_SIZE||1;if(256%t)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=n&&Te.get(n);r||(r=this.precomputeWindow(t),n&&1!==t&&(r=Pe.normalizeZ(r),Te.set(n,r)));let o=Pe.ZERO,i=Pe.BASE;const s=1+(_e?128/t:256/t),a=2**(t-1),c=BigInt(2**t-1),u=2**t,l=BigInt(t);for(let n=0;n<s;n++){const t=n*a;let s=Number(e&c);e>>=l,s>a&&(s-=u,e+=ye);const h=t,f=t+Math.abs(s)-1,d=n%2!=0,p=s<0;0===s?i=i.add(He(d,r[h])):o=o.add(He(p,r[f]))}return{p:o,f:i}}multiply(e,n){let t,r,o=Je(e);if(_e){const{k1neg:e,k1:i,k2neg:s,k2:a}=xe.splitScalar(o);let{p:c,f:u}=this.wNAF(i,n),{p:l,f:h}=this.wNAF(a,n);c=He(e,c),l=He(s,l),l=new Pe(Ze(l.x*xe.beta),l.y,l.z),t=c.add(l),r=u.add(h)}else{const{p:e,f:i}=this.wNAF(o,n);t=e,r=i}return Pe.normalizeZ([t,r])[0]}toAffine(e){const{x:n,y:t,z:r}=this,o=this.equals(Pe.ZERO);null==e&&(e=o?be:Ye(r));const i=e,s=Ze(i*i),a=Ze(s*i),c=Ze(n*s),u=Ze(t*a),l=Ze(r*i);if(o)return Oe.ZERO;if(l!==ye)throw new Error("invZ was invalid");return new Oe(c,u)}}function He(e,n){const t=n.negate();return e?t:n}Pe.BASE=new Pe(me.Gx,me.Gy,ye),Pe.ZERO=new Pe(pe,ye,pe);const Te=new WeakMap;class Oe{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,Te.delete(this)}hasEvenY(){return this.y%ge===pe}static fromCompressedHex(e){const n=32===e.length,t=Ge(n?e:e.subarray(1));if(!on(t))throw new Error("Point is not on curve");let r=function(e){const{P:n}=me,t=BigInt(6),r=BigInt(11),o=BigInt(22),i=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%n,u=c*c*e%n,l=Xe(u,we)*u%n,h=Xe(l,we)*u%n,f=Xe(h,ge)*c%n,d=Xe(f,r)*f%n,p=Xe(d,o)*d%n,y=Xe(p,s)*p%n,g=Xe(y,a)*y%n,w=Xe(g,s)*p%n,b=Xe(w,we)*u%n,m=Xe(b,i)*d%n,v=Xe(m,t)*c%n,x=Xe(v,ge);if(x*x%n!==e)throw new Error("Cannot find square root");return x}(Ue(t));const o=(r&ye)===ye;n?o&&(r=Ze(-r)):1==(1&e[0])!==o&&(r=Ze(-r));const i=new Oe(t,r);return i.assertValidity(),i}static fromUncompressedHex(e){const n=Ge(e.subarray(1,Ee+1)),t=Ge(e.subarray(Ee+1,2*Ee+1)),r=new Oe(n,t);return r.assertValidity(),r}static fromHex(e){const n=qe(e),t=n.length,r=n[0];if(t===Ee)return this.fromCompressedHex(n);if(t===ke&&(2===r||3===r))return this.fromCompressedHex(n);if(t===Ce&&4===r)return this.fromUncompressedHex(n);throw new Error(`Point.fromHex: received invalid point. Expected 32-${ke} compressed bytes or ${Ce} uncompressed bytes, not ${t}`)}static fromPrivateKey(e){return Oe.BASE.multiply(an(e))}static fromSignature(e,n,t){const{r,s:o}=un(n);if(![0,1,2,3].includes(t))throw new Error("Cannot recover: invalid recovery bit");const i=Qe(qe(e)),{n:s}=me,a=2===t||3===t?r+s:r,c=Ye(a,s),u=Ze(-i*c,s),l=Ze(o*c,s),h=1&t?"03":"02",f=Oe.fromHex(h+Fe(a)),d=Oe.BASE.multiplyAndAddUnsafe(f,u,l);if(!d)throw new Error("Cannot recover signature: point at infinify");return d.assertValidity(),d}toRawBytes(e=!1){return Ve(this.toHex(e))}toHex(e=!1){const n=Fe(this.x);return e?`${this.hasEvenY()?"02":"03"}${n}`:`04${n}${Fe(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:n,y:t}=this;if(!on(n)||!on(t))throw new Error(e);const r=Ze(t*t);if(Ze(r-Ue(n))!==pe)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Oe(this.x,Ze(-this.y))}double(){return Pe.fromAffine(this).double().toAffine()}add(e){return Pe.fromAffine(this).add(Pe.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return Pe.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,n,t){const r=Pe.fromAffine(this),o=n===pe||n===ye||this!==Oe.BASE?r.multiplyUnsafe(n):r.multiply(n),i=Pe.fromAffine(e).multiplyUnsafe(t),s=o.add(i);return s.equals(Pe.ZERO)?void 0:s.toAffine()}}function Ne(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function $e(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${Le(e)}`);const n=e[1],t=e.subarray(2,n+2);if(!n||t.length!==n)throw new Error("Invalid signature integer: wrong length");if(0===t[0]&&t[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Ge(t),left:e.subarray(n+2)}}Oe.BASE=new Oe(me.Gx,me.Gy),Oe.ZERO=new Oe(pe,pe);class je{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromCompact(e){const n=e instanceof Uint8Array,t="Signature.fromCompact";if("string"!=typeof e&&!n)throw new TypeError(`${t}: Expected string or Uint8Array`);const r=n?Le(e):e;if(128!==r.length)throw new Error(`${t}: Expected 64-byte hex`);return new je(We(r.slice(0,64)),We(r.slice(64,128)))}static fromDER(e){const n=e instanceof Uint8Array;if("string"!=typeof e&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:t,s:r}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${Le(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:n,left:t}=$e(e.subarray(2)),{data:r,left:o}=$e(t);if(o.length)throw new Error(`Invalid signature: left bytes after parsing: ${Le(o)}`);return{r:n,s:r}}(n?e:Ve(e));return new je(t,r)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:n}=this;if(!rn(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!rn(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=me.n>>ye;return this.s>e}normalizeS(){return this.hasHighS()?new je(this.r,Ze(-this.s,me.n)):this}toDERRawBytes(){return Ve(this.toDERHex())}toDERHex(){const e=Ne(ze(this.s)),n=Ne(ze(this.r)),t=e.length/2,r=n.length/2,o=ze(t),i=ze(r);return`30${ze(r+t+4)}02${i}${n}02${o}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Ve(this.toCompactHex())}toCompactHex(){return Fe(this.r)+Fe(this.s)}}function Ke(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const n=e.reduce(((e,n)=>e+n.length),0),t=new Uint8Array(n);for(let n=0,r=0;n<e.length;n++){const o=e[n];t.set(o,r),r+=o.length}return t}const Re=Array.from({length:256},((e,n)=>n.toString(16).padStart(2,"0")));function Le(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let n="";for(let t=0;t<e.length;t++)n+=Re[e[t]];return n}const De=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Fe(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(pe<=e&&e<De))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function Me(e){const n=Ve(Fe(e));if(32!==n.length)throw new Error("Error: expected 32 bytes");return n}function ze(e){const n=e.toString(16);return 1&n.length?`0${n}`:n}function We(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Ve(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const n=new Uint8Array(e.length/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n}function Ge(e){return We(Le(e))}function qe(e){return e instanceof Uint8Array?Uint8Array.from(e):Ve(e)}function Je(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&rn(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Ze(e,n=me.P){const t=e%n;return t>=pe?t:n+t}function Xe(e,n){const{P:t}=me;let r=e;for(;n-- >pe;)r*=r,r%=t;return r}function Ye(e,n=me.P){if(e===pe||n<=pe)throw new Error(`invert: expected positive integers, got n=${e} mod=${n}`);let t=Ze(e,n),r=n,o=pe,i=ye,s=ye,a=pe;for(;t!==pe;){const e=r/t,n=r%t,c=o-s*e,u=i-a*e;r=t,t=n,o=s,i=a,s=c,a=u}if(r!==ye)throw new Error("invert: does not exist");return Ze(o,n)}function Qe(e,n=!1){const t=function(e){const n=8*e.length-8*Ae,t=Ge(e);return n>0?t>>BigInt(n):t}(e);if(n)return t;const{n:r}=me;return t>=r?t-r:t}let en,nn;class tn{constructor(e,n){if(this.hashLen=e,this.qByteLen=n,"number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof n||n<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return vn.hmacSha256(this.k,...e)}hmacSync(...e){return nn(this.k,...e)}checkSync(){if("function"!=typeof nn)throw new Ie("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const t=this.v.slice();n.push(t),e+=this.v.length}return Ke(...n)}generateSync(){this.checkSync(),this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const t=this.v.slice();n.push(t),e+=this.v.length}return Ke(...n)}}function rn(e){return pe<e&&e<me.n}function on(e){return pe<e&&e<me.P}function sn(e,n,t,r=!0){const{n:o}=me,i=Qe(e,!0);if(!rn(i))return;const s=Ye(i,o),a=Oe.BASE.multiply(i),c=Ze(a.x,o);if(c===pe)return;const u=Ze(s*Ze(n+t*c,o),o);if(u===pe)return;let l=new je(c,u),h=(a.x===l.r?0:2)|Number(a.y&ye);return r&&l.hasHighS()&&(l=l.normalizeS(),h^=1),{sig:l,recovery:h}}function an(e){let n;if("bigint"==typeof e)n=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)n=BigInt(e);else if("string"==typeof e){if(e.length!==2*Ae)throw new Error("Expected 32 bytes of private key");n=We(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==Ae)throw new Error("Expected 32 bytes of private key");n=Ge(e)}if(!rn(n))throw new Error("Expected private key: 0 < key < n");return n}function cn(e){return e instanceof Oe?(e.assertValidity(),e):Oe.fromHex(e)}function un(e){if(e instanceof je)return e.assertValidity(),e;try{return je.fromDER(e)}catch(n){return je.fromCompact(e)}}function ln(e,n=!1){return Oe.fromPrivateKey(e).toRawBytes(n)}function hn(e){const n=e instanceof Uint8Array,t="string"==typeof e,r=(n||t)&&e.length;return n?r===ke||r===Ce:t?r===2*ke||r===2*Ce:e instanceof Oe}function fn(e,n,t=!1){if(hn(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!hn(n))throw new TypeError("getSharedSecret: second arg must be public key");const r=cn(n);return r.assertValidity(),r.multiply(an(e)).toRawBytes(t)}function dn(e){return Ge(e.length>Ee?e.slice(0,Ee):e)}function pn(e){const n=dn(e),t=Ze(n,me.n);return yn(t<pe?n:t)}function yn(e){return Me(e)}function gn(e,n,t={}){const{seed:r,m:o,d:i}=function(e,n,t){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const r=qe(e),o=an(n),i=[yn(o),pn(r)];if(null!=t){!0===t&&(t=vn.randomBytes(Ee));const e=qe(t);if(e.length!==Ee)throw new Error(`sign: Expected ${Ee} bytes of extra data`);i.push(e)}return{seed:Ke(...i),m:dn(r),d:o}}(e,n,t.extraEntropy),s=new tn(Se,Ae);let a;for(s.reseedSync(r);!(a=sn(s.generateSync(),o,i,t.canonical));)s.reseedSync();return function(e,n){const{sig:t,recovery:r}=e,{der:o,recovered:i}=Object.assign({canonical:!0,der:!0},n),s=o?t.toDERRawBytes():t.toCompactRawBytes();return i?[s,r]:s}(a,t)}const wn={strict:!0};Oe.BASE._setWindowSize(8);const bn={node:de,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},mn={},vn={bytesToHex:Le,hexToBytes:Ve,concatBytes:Ke,mod:Ze,invert:Ye,isValidPrivateKey(e){try{return an(e),!0}catch(e){return!1}},_bigintTo32Bytes:Me,_normalizePrivateKey:an,hashToPrivateKey:e=>{e=qe(e);const n=Ae+8;if(e.length<n||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return Me(Ze(Ge(e),me.n-ye)+ye)},randomBytes:(e=32)=>{if(bn.web)return bn.web.getRandomValues(new Uint8Array(e));if(bn.node){const{randomBytes:n}=bn.node;return Uint8Array.from(n(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>vn.hashToPrivateKey(vn.randomBytes(Ae+8)),precompute(e=8,n=Oe.BASE){const t=n===Oe.BASE?n:new Oe(n.x,n.y);return t._setWindowSize(e),t.multiply(we),t},sha256:async(...e)=>{if(bn.web){const n=await bn.web.subtle.digest("SHA-256",Ke(...e));return new Uint8Array(n)}if(bn.node){const{createHash:n}=bn.node,t=n("sha256");return e.forEach((e=>t.update(e))),Uint8Array.from(t.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...n)=>{if(bn.web){const t=await bn.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=Ke(...n),o=await bn.web.subtle.sign("HMAC",t,r);return new Uint8Array(o)}if(bn.node){const{createHmac:t}=bn.node,r=t("sha256",e);return n.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...n)=>{let t=mn[e];if(void 0===t){const n=await vn.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=Ke(n,n),mn[e]=t}return vn.sha256(t,...n)},taggedHashSync:(e,...n)=>{if("function"!=typeof en)throw new Ie("sha256Sync is undefined, you need to set it");let t=mn[e];if(void 0===t){const n=en(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=Ke(n,n),mn[e]=t}return en(t,...n)},_JacobianPoint:Pe};function xn(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function En(...e){const n=(e,n)=>t=>e(n(t));return{encode:Array.from(e).reverse().reduce(((e,t)=>e?n(e,t.encode):t.encode),void 0),decode:e.reduce(((e,t)=>e?n(e,t.decode):t.decode),void 0)}}function An(e){return{encode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("alphabet.encode input should be an array of numbers");return n.map((n=>{if(xn(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]}))},decode:n=>{if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("alphabet.decode input should be array of strings");return n.map((n=>{if("string"!=typeof n)throw new Error(`alphabet.decode: not string element=${n}`);const t=e.indexOf(n);if(-1===t)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return t}))}}}function Sn(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:n=>{if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("join.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return n.join(e)},decode:n=>{if("string"!=typeof n)throw new Error("join.decode input should be string");return n.split(e)}}}function kn(e,n="="){if(xn(e),"string"!=typeof n)throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;t.length*e%8;)t.push(n);return t},decode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=t.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&t[r-1]===n;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,r)}}}function Cn(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:n=>e(n)}}function Un(e,n,t){if(n<2)throw new Error(`convertRadix: wrong from=${n}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: wrong to=${t}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],i=Array.from(e);for(i.forEach((e=>{if(xn(e),e<0||e>=n)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,s=!0;for(let o=r;o<i.length;o++){const a=i[o],c=n*e+a;if(!Number.isSafeInteger(c)||n*e/n!==e||c-a!=n*e)throw new Error("convertRadix: carry overflow");if(e=c%t,i[o]=Math.floor(c/t),!Number.isSafeInteger(i[o])||i[o]*t+e!==c)throw new Error("convertRadix: carry overflow");s&&(i[o]?s=!1:r=o)}if(o.push(e),s)break}for(let n=0;n<e.length-1&&0===e[n];n++)o.push(0);return o.reverse()}Object.defineProperties(vn,{sha256Sync:{configurable:!1,get:()=>en,set(e){en||(en=e)}},hmacSha256Sync:{configurable:!1,get:()=>nn,set(e){nn||(nn=e)}}});const _n=(e,n)=>n?_n(n,e%n):e,In=(e,n)=>e+(n-_n(e,n));function Bn(e,n,t,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(n<=0||n>32)throw new Error(`convertRadix2: wrong from=${n}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(In(n,t)>32)throw new Error(`convertRadix2: carry overflow from=${n} to=${t} carryBits=${In(n,t)}`);let o=0,i=0;const s=2**t-1,a=[];for(const r of e){if(xn(r),r>=2**n)throw new Error(`convertRadix2: invalid data word=${r} from=${n}`);if(o=o<<n|r,i+n>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${n}`);for(i+=n;i>=t;i-=t)a.push((o>>i-t&s)>>>0);o&=2**i-1}if(o=o<<t-i&s,!r&&i>=n)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function Pn(e,n=!1){if(xn(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(In(8,e)>32||In(e,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Bn(Array.from(t),8,e,!n)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Bn(t,e,8,n))}}}function Hn(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...n){try{return e.apply(null,n)}catch(e){}}}En(Pn(4),An("0123456789ABCDEF"),Sn("")),En(Pn(5),An("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),kn(5),Sn("")),En(Pn(5),An("0123456789ABCDEFGHIJKLMNOPQRSTUV"),kn(5),Sn("")),En(Pn(5),An("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Sn(""),Cn((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),En(Pn(6),An("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),kn(6),Sn("")),En(Pn(6),An("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),kn(6),Sn(""));const Tn=e=>{return En((xn(n=58),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Un(Array.from(e),256,n)},decode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Un(e,n,256))}}),An(e),Sn(""));var n},On=Tn("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Nn=(Tn("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),Tn("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),En(An("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Sn(""))),$n=[996825010,642813549,513874426,1027748829,705979059];function jn(e){const n=e>>25;let t=(33554431&e)<<5;for(let e=0;e<$n.length;e++)1==(n>>e&1)&&(t^=$n[e]);return t}function Kn(e,n,t=1){const r=e.length;let o=1;for(let n=0;n<r;n++){const t=e.charCodeAt(n);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);o=jn(o)^t>>5}o=jn(o);for(let n=0;n<r;n++)o=jn(o)^31&e.charCodeAt(n);for(let e of n)o=jn(o)^e;for(let e=0;e<6;e++)o=jn(o);return o^=t,Nn.encode(Bn([o%2**30],30,5,!1))}function Rn(e){const n="bech32"===e?1:734539939,t=Pn(5),r=t.decode,o=t.encode,i=Hn(r);function s(e,t=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==t&&e.length>t)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${t})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const o=(e=r).lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=e.slice(0,o),s=e.slice(o+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=Nn.decode(s).slice(0,-6),c=Kn(i,a,n);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:i,words:a}}return{encode:function(e,t,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof t);const o=e.length+7+t.length;if(!1!==r&&o>r)throw new TypeError(`Length ${o} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${Nn.encode(t)}${Kn(e,t,n)}`},decode:s,decodeToBytes:function(e){const{prefix:n,words:t}=s(e,!1);return{prefix:n,words:t,bytes:r(t)}},decodeUnsafe:Hn(s),fromWords:r,fromWordsUnsafe:i,toWords:o}}Rn("bech32"),Rn("bech32m");En(Pn(4),An("0123456789abcdef"),Sn(""),Cn((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))),vn.hmacSha256Sync=(e,...n)=>g(R,e,vn.concatBytes(...n));const Ln=(Dn=R,En(function(e,n){if(xn(e),"function"!=typeof n)throw new Error("checksum fn should be function");return{encode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=n(t).slice(0,e),o=new Uint8Array(t.length+e);return o.set(t),o.set(r,t.length),o},decode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=t.slice(0,-e),o=n(r).slice(0,e),i=t.slice(-e);for(let n=0;n<e;n++)if(o[n]!==i[n])throw new Error("Invalid checksum");return r}}}(4,(e=>Dn(Dn(e)))),On));var Dn;function Fn(e){return BigInt(`0x${function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let n="";for(let t=0;t<e.length;t++)n+=u[e[t]];return n}(e)}`)}const Mn=l("Bitcoin seed"),zn={private:76066276,public:76067358},Wn=2147483648,Vn=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const n=new Uint8Array(4);return a(n).setUint32(0,e,!1),n};class Gn{constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||zn,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!vn.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:Fn(e.privateKey),this.privKeyBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const n=new Uint8Array(e.length/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n}(this.privKey.toString(16).padStart(64,"0")),this.pubKey=ln(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=Oe.fromHex(e.publicKey).toRawBytes(!0)}var n;this.pubHash=(n=this.pubKey,H(R(n)))}get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,a(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return Ln.encode(this.serialize(this.versions.private,f(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Ln.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,n=zn){if(r(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const t=g(he,Mn,e);return new Gn({versions:n,chainCode:t.slice(32),privateKey:t.slice(0,32)})}static fromExtendedKey(e,n=zn){const t=Ln.decode(e),r=a(t),o=r.getUint32(0,!1),i={versions:n,depth:t[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:t.slice(13,45)},s=t.slice(45),c=0===s[0];if(o!==n[c?"private":"public"])throw new Error("Version mismatch");return new Gn(c?{...i,privateKey:s.slice(1)}:{...i,publicKey:s})}static fromJSON(e){return Gn.fromExtendedKey(e.xpriv)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const n=e.replace(/^[mM]'?\//,"").split("/");let t=this;for(const e of n){const n=/^(\d+)('?)$/.exec(e);if(!n||3!==n.length)throw new Error(`Invalid child index: ${e}`);let r=+n[1];if(!Number.isSafeInteger(r)||r>=Wn)throw new Error("Invalid index");"'"===n[2]&&(r+=Wn),t=t.deriveChild(r)}return t}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let n=Vn(e);if(e>=Wn){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");n=f(new Uint8Array([0]),e,n)}else n=f(this.pubKey,n);const t=g(he,this.chainCode,n),r=Fn(t.slice(0,32)),o=t.slice(32);if(!vn.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const i={versions:this.versions,chainCode:o,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=vn.mod(this.privKey+r,me.n);if(!vn.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");i.privateKey=e}else{const e=Oe.fromHex(this.pubKey).add(Oe.fromPrivateKey(r));if(e.equals(Oe.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");i.publicKey=e.toRawBytes(!0)}return new Gn(i)}catch(n){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return r(e,32),gn(e,this.privKey,{canonical:!0,der:!1})}verify(e,n){if(r(e,32),r(n,64),!this.publicKey)throw new Error("No publicKey set!");let t;try{t=je.fromCompact(n)}catch(e){return!1}return function(e,n,t,r=wn){let o;try{o=un(e),n=qe(n)}catch(e){return!1}const{r:i,s}=o;if(r.strict&&o.hasHighS())return!1;const a=Qe(n);let c;try{c=cn(t)}catch(e){return!1}const{n:u}=me,l=Ye(s,u),h=Ze(a*l,u),f=Ze(i*l,u),d=Oe.BASE.multiplyAndAddUnsafe(c,h,f);return!!d&&Ze(d.x,u)===i}(t,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,n){if(!this.chainCode)throw new Error("No chainCode set");return r(n,33),f(Vn(e),new Uint8Array([this.depth]),Vn(this.parentFingerprint),Vn(this.index),this.chainCode,n)}}function qn(){let e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(n=>{const t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===n?t:3&t|8).toString(16)}))}const Jn=Array.from({length:256},((e,n)=>n.toString(16).padStart(2,"0")));function Zn(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let n="";for(const t of e)n+=Jn[t];return n}function Xn(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);var n;e=(n=e,e=/^0x/i.test(n)?n.slice(2):n).length%2?`0${e}`:e;const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[n]=i}return t}function Yn(e){return(new TextEncoder).encode(e)}function Qn(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const n=e.reduce(((e,n)=>e+n.length),0),t=new Uint8Array(n);for(let n=0,r=0;n<e.length;n++){const o=e[n];t.set(o,r),r+=o.length}return t}const et='Crypto lib not found. Either the WebCrypto "crypto.subtle" or Node.js "crypto" module must be available.';async function nt(){if("undefined"!=typeof crypto&&void 0!==crypto.subtle)return{lib:crypto.subtle,name:"subtleCrypto"};try{return{lib:o(516),name:"nodeCrypto"}}catch(e){throw new Error(et)}}class tt{constructor(e,n){this.createCipher=e,this.createDecipher=n}async encrypt(e,n,t,r){if("aes-128-cbc"!==e&&"aes-256-cbc"!==e)throw new Error(`Unsupported cipher algorithm "${e}"`);const o=this.createCipher(e,n,t),i=new Uint8Array(Qn(o.update(r),o.final()));return Promise.resolve(i)}async decrypt(e,n,t,r){if("aes-128-cbc"!==e&&"aes-256-cbc"!==e)throw new Error(`Unsupported cipher algorithm "${e}"`);const o=this.createDecipher(e,n,t),i=new Uint8Array(Qn(o.update(r),o.final()));return Promise.resolve(i)}}class rt{constructor(e){this.subtleCrypto=e}async encrypt(e,n,t,r){let o,i;if("aes-128-cbc"===e)o="AES-CBC",i=128;else{if("aes-256-cbc"!==e)throw new Error(`Unsupported cipher algorithm "${e}"`);o="AES-CBC",i=256}const s=await this.subtleCrypto.importKey("raw",n,{name:o,length:i},!1,["encrypt"]),a=await this.subtleCrypto.encrypt({name:o,iv:t},s,r);return new Uint8Array(a)}async decrypt(e,n,t,r){let o,i;if("aes-128-cbc"===e)o="AES-CBC",i=128;else{if("aes-256-cbc"!==e)throw new Error(`Unsupported cipher algorithm "${e}"`);o="AES-CBC",i=256}const s=await this.subtleCrypto.importKey("raw",n,{name:o,length:i},!1,["decrypt"]),a=await this.subtleCrypto.decrypt({name:o,iv:t},s,r);return new Uint8Array(a)}}async function ot(){const e=await nt();return"subtleCrypto"===e.name?new rt(e.lib):new tt(e.lib.createCipheriv,e.lib.createDecipheriv)}const it=(e=32)=>vn.randomBytes(e),st={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(st);class at extends Error{constructor(e){super();let n=e.message,t=`Error Code: ${e.code}`,r=this.stack;if(r)t+=`Stack Trace:\n${r}`;else try{throw new Error}catch(e){r=e.stack}n+=`\nIf you believe this exception is caused by a bug in stacks.js,\n      please file a bug report: https://github.com/blockstack/stacks.js/issues\n\n${t}`,this.message=n,this.code=e.code,this.parameter=e.parameter?e.parameter:void 0}toString(){return`${super.toString()}\n    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}}class ct extends at{constructor(e="Unable to decrypt cipher object."){super({code:st.FAILED_DECRYPTION_ERROR,message:e}),this.message=e,this.name="FailedDecryptionError"}}class ut extends at{constructor(e,n){super(e),n&&(this.hubError={statusCode:n.status,statusText:n.statusText},"string"==typeof n.body?this.hubError.message=n.body:"object"==typeof n.body&&Object.assign(this.hubError,n.body))}}class lt extends ut{constructor(e,n){super({message:e,code:st.DOES_NOT_EXIST},n),this.name="DoesNotExist"}}class ht extends ut{constructor(e,n){super({message:e,code:st.CONFLICT_ERROR},n),this.name="ConflictError"}}class ft extends ut{constructor(e,n){super({message:e,code:st.NOT_ENOUGH_PROOF_ERROR},n),this.name="NotEnoughProofError"}}class dt extends ut{constructor(e,n){super({message:e,code:st.BAD_PATH_ERROR},n),this.name="BadPathError"}}class pt extends ut{constructor(e,n){super({message:e,code:st.VALIDATION_ERROR},n),this.name="ValidationError"}}class yt extends ut{constructor(e,n,t){super({message:e,code:st.PAYLOAD_TOO_LARGE_ERROR},n),this.name="PayloadTooLargeError",this.maxUploadByteSize=t}}class gt extends ut{constructor(e,n){super({message:e,code:st.PRECONDITION_FAILED_ERROR},n),this.name="PreconditionFailedError"}}var wt=o(766);function bt(e){const n="string"==typeof e?Xn(e):e;if(32!=n.length&&33!=n.length)throw new Error(`Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${n.length}`);if(33==n.length&&1!==n[32])throw new Error("Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01");return n}var mt=o(22),vt=o.n(mt);class xt{constructor(e){this.createHash=e}async digest(e,n="sha256"){try{const t=this.createHash(n).update(e).digest();return Promise.resolve(t)}catch(t){return console.log(t),console.log(`Error performing ${n} digest with Node.js 'crypto.createHash', falling back to JS implementation.`),Promise.resolve("sha256"===n?At(e):St(e))}}}class Et{constructor(e){this.subtleCrypto=e}async digest(e,n="sha256"){let t;if("sha256"===n)t="SHA-256";else{if("sha512"!==n)throw new Error(`Unsupported hash algorithm ${n}`);t="SHA-512"}try{const n=await this.subtleCrypto.digest(t,e);return new Uint8Array(n)}catch(t){return console.log(t),console.log(`Error performing ${n} digest with WebCrypto, falling back to JS implementation.`),Promise.resolve("sha256"===n?At(e):St(e))}}}function At(e){return R(e)}function St(e){return he(e)}const kt=0;function Ct(e,n=kt){var t;return function(e,n){return function(e){const n=R(R(e));return vt().encode(Qn(e,n).slice(0,e.length+4))}(Qn(new Uint8Array([e]),n.slice(0,20)))}(n,(t=At("string"==typeof e?Xn(e):e),H(t)))}function Ut(e){return Zn(ln(bt(e).slice(0,32),!0))}var _t;function It(e,n){return g(R,e,n)}function Bt(e){const n=St(e);return{encryptionKey:n.slice(0,32),hmacKey:n.slice(32)}}async function Pt(e,n,t,r){const o=function(e){const n={result:!1,reason_data:"Invalid public key format",reason:_t.InvalidFormat},t={result:!1,reason_data:"Public key is not a point",reason:_t.IsNotPoint};if(66!==e.length&&130!==e.length)return n;const r=e.slice(0,2);if(130===e.length&&"04"!==r)return n;if(66===e.length&&"02"!==r&&"03"!==r)return n;if(null===e.match(/^[0-9a-f]+$/i))return n;try{return Oe.fromHex(e).assertValidity(),{result:!0,reason_data:null,reason:null}}catch(e){return t}}(e);if(!o.result)throw o;const i=vn.randomPrivateKey(),s=ln(i,!0);let a=fn(i,e,!0);a=a.slice(1);const c=Bt(a),u=vn.randomBytes(16),l=await async function(e,n,t){const r=await ot();return await r.encrypt("aes-256-cbc",n,e,t)}(u,c.encryptionKey,n),h=Qn(u,s,l),f=It(c.hmacKey,h);let d;if(r&&"hex"!==r){if("base64"!==r)throw new Error(`Unexpected cipherTextEncoding "${r}"`);d=(0,wt.fromByteArray)(l)}else d=Zn(l);const p={iv:Zn(u),ephemeralPK:Zn(s),cipherText:d,mac:Zn(f),wasString:t};return r&&"hex"!==r&&(p.cipherTextEncoding=r),p}function Ht(e,n,t=0){return e[t+3]=n,n>>>=8,e[t+2]=n,n>>>=8,e[t+1]=n,n>>>=8,e[t]=n,e}vn.hmacSha256Sync=(e,...n)=>{const t=g.create(R,e);return n.forEach((e=>t.update(e))),t.digest()},vn.hmacSha256Sync=(e,...n)=>{const t=g.create(R,e);return n.forEach((e=>t.update(e))),t.digest()},function(e){e.InvalidFormat="InvalidFormat",e.IsNotPoint="IsNotPoint"}(_t||(_t={}));class Tt{constructor(e){this.nodePbkdf2=e}async derive(e,n,t,r,o){if("sha512"!==o&&"sha256"!==o)throw new Error(`Unsupported digest "${o}" for Pbkdf2`);return new Promise(((i,s)=>{this.nodePbkdf2(e,n,t,r,o,((e,n)=>{e&&s(e),i(n)}))}))}}class Ot{constructor(e){this.subtleCrypto=e}async derive(e,n,t,r,o){let i;if("sha256"===o)i="SHA-256";else{if("sha512"!==o)throw new Error(`Unsupported Pbkdf2 digest algorithm "${o}"`);i="SHA-512"}const s=Yn(e);try{const e=await this.subtleCrypto.importKey("raw",s,"PBKDF2",!1,["deriveBits"]),o=await this.subtleCrypto.deriveBits({name:"PBKDF2",salt:n,iterations:t,hash:{name:i}},e,8*r);return new Uint8Array(o)}catch(i){return new Nt(this.subtleCrypto).derive(e,n,t,r,o)}}}class Nt{constructor(e){this.subtleCrypto=e}async derive(e,n,t,r,o){if("sha512"!==o&&"sha256"!==o)throw new Error(`Unsupported digest "${o}" for Pbkdf2`);const i=Yn(e),s={name:"HMAC",hash:"sha512"===o?"SHA-512":"SHA-256"},a=(e,n)=>this.subtleCrypto.importKey("raw",e,s,!0,["sign"]).then((e=>this.subtleCrypto.sign(s,e,n))).then((e=>new Uint8Array(e))),c=new Uint8Array(r),u=n.length,l=new Uint8Array(u+4);l.set(n);let h=0;const f="sha512"===o?64:32,d=Math.ceil(r/f);for(let e=1;e<=d;e++){Ht(l,e,u);const n=await a(i,l);let r=n;for(let e=1;e<t;e++){r=await a(i,r);for(let e=0;e<f;e++)n[e]^=r[e]}c.set(n.subarray(0,c.byteLength-h),h),h+=f}return c}}const $t=33,jt={referrerPolicy:"origin",headers:{"x-hiro-product":"stacksjs"}};async function Kt(e,n){const t={};return Object.assign(t,jt,n),await fetch(e,t)}function Rt(...e){const{fetchLib:n,middlewares:t}=function(e){let n=Kt,t=[];return e.length>0&&"function"==typeof e[0]&&(n=e.shift()),e.length>0&&(t=e),{fetchLib:n,middlewares:t}}(e);return async(e,r)=>{let o={url:e,init:r??{}};for(const e of t)"function"==typeof e.pre&&(o=await Promise.resolve(e.pre({fetch:n,...o}))??o);let i=await n(o.url,o.init);for(const e of t)if("function"==typeof e.post){const t=await Promise.resolve(e.post({fetch:n,url:o.url,init:o.init,response:i?.clone()??i}));i=t??i}return i}}var Lt,Dt,Ft,Mt,zt;!function(e){e[e.Mainnet=1]="Mainnet",e[e.Testnet=2147483648]="Testnet"}(Lt||(Lt={})),function(e){e[e.Mainnet=385875968]="Mainnet",e[e.Testnet=4278190080]="Testnet"}(Dt||(Dt={})),Lt.Mainnet,(zt=Ft||(Ft={}))[zt.Mainnet=0]="Mainnet",zt[zt.Testnet=128]="Testnet",function(e){e[e.MainnetSingleSig=22]="MainnetSingleSig",e[e.MainnetMultiSig=20]="MainnetMultiSig",e[e.TestnetSingleSig=26]="TestnetSingleSig",e[e.TestnetMultiSig=21]="TestnetMultiSig"}(Mt||(Mt={})),Ft.Mainnet;const Wt={chainId:Lt.Mainnet,transactionVersion:Ft.Mainnet,peerNetworkId:Dt.Mainnet,magicBytes:"X2",bootAddress:"SP000000000000000000002Q6VF78",addressVersion:{singleSig:Mt.MainnetSingleSig,multiSig:Mt.MainnetMultiSig},client:{baseUrl:"https://api.mainnet.hiro.so"}},Vt={chainId:Lt.Testnet,transactionVersion:Ft.Testnet,peerNetworkId:Dt.Testnet,magicBytes:"T2",bootAddress:"ST000000000000000000002AMW42H",addressVersion:{singleSig:Mt.TestnetSingleSig,multiSig:Mt.TestnetMultiSig},client:{baseUrl:"https://api.testnet.hiro.so"}},Gt={...Vt,addressVersion:{...Vt.addressVersion},magicBytes:"id",client:{baseUrl:"http://localhost:3999"}},qt={...Gt,addressVersion:{...Gt.addressVersion},client:{...Gt.client}};function Jt(e){return"string"==typeof e?function(e){switch(e){case"mainnet":return Wt;case"testnet":return Vt;case"devnet":return Gt;case"mocknet":return qt;default:throw new Error(`Unknown network name: ${e}`)}}(e):e}function Zt(e){return e.client.fetch?e.client:{...e.client,fetch:Rt()}}var Xt,Yt,Qt,er,nr=o(870);(er=Xt||(Xt={}))[er.TokenTransfer=0]="TokenTransfer",er[er.SmartContract=1]="SmartContract",er[er.VersionedSmartContract=6]="VersionedSmartContract",er[er.ContractCall=2]="ContractCall",er[er.PoisonMicroblock=3]="PoisonMicroblock",er[er.Coinbase=4]="Coinbase",er[er.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",er[er.TenureChange=7]="TenureChange",er[er.NakamotoCoinbase=8]="NakamotoCoinbase",function(e){e[e.Clarity1=1]="Clarity1",e[e.Clarity2=2]="Clarity2",e[e.Clarity3=3]="Clarity3"}(Yt||(Yt={})),function(e){e[e.OnChainOnly=1]="OnChainOnly",e[e.OffChainOnly=2]="OffChainOnly",e[e.Any=3]="Any"}(Qt||(Qt={}));var tr,rr,or,ir,sr,ar,cr,ur,lr,hr,fr,dr,pr,yr;Qt.OnChainOnly,Qt.OffChainOnly,Qt.Any,Qt.OnChainOnly,Qt.OnChainOnly,Qt.OffChainOnly,Qt.OffChainOnly,Qt.Any,Qt.Any,function(e){e[e.Allow=1]="Allow",e[e.Deny=2]="Deny"}(tr||(tr={})),function(e){e[e.STX=0]="STX",e[e.Fungible=1]="Fungible",e[e.NonFungible=2]="NonFungible"}(rr||(rr={})),function(e){e[e.Standard=4]="Standard",e[e.Sponsored=5]="Sponsored"}(or||(or={})),(yr=ir||(ir={}))[yr.P2PKH=0]="P2PKH",yr[yr.P2SH=1]="P2SH",yr[yr.P2WPKH=2]="P2WPKH",yr[yr.P2WSH=3]="P2WSH",yr[yr.P2SHNonSequential=5]="P2SHNonSequential",yr[yr.P2WSHNonSequential=7]="P2WSHNonSequential",(pr=sr||(sr={}))[pr.Compressed=0]="Compressed",pr[pr.Uncompressed=1]="Uncompressed",function(e){e[e.Equal=1]="Equal",e[e.Greater=2]="Greater",e[e.GreaterEqual=3]="GreaterEqual",e[e.Less=4]="Less",e[e.LessEqual=5]="LessEqual"}(ar||(ar={})),function(e){e[e.Sends=16]="Sends",e[e.DoesNotSend=17]="DoesNotSend"}(cr||(cr={})),function(e){e[e.Origin=1]="Origin",e[e.Standard=2]="Standard",e[e.Contract=3]="Contract"}(ur||(ur={})),function(e){e[e.STX=0]="STX",e[e.Fungible=1]="Fungible",e[e.NonFungible=2]="NonFungible"}(lr||(lr={})),function(e){e[e.BlockFound=0]="BlockFound",e[e.Extended=1]="Extended"}(hr||(hr={})),function(e){e[e.PublicKeyCompressed=0]="PublicKeyCompressed",e[e.PublicKeyUncompressed=1]="PublicKeyUncompressed",e[e.SignatureCompressed=2]="SignatureCompressed",e[e.SignatureUncompressed=3]="SignatureUncompressed"}(fr||(fr={})),function(e){e.Serialization="Serialization",e.Deserialization="Deserialization",e.SignatureValidation="SignatureValidation",e.FeeTooLow="FeeTooLow",e.BadNonce="BadNonce",e.NotEnoughFunds="NotEnoughFunds",e.NoSuchContract="NoSuchContract",e.NoSuchPublicFunction="NoSuchPublicFunction",e.BadFunctionArgument="BadFunctionArgument",e.ContractAlreadyExists="ContractAlreadyExists",e.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",e.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",e.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",e.BadAddressVersionByte="BadAddressVersionByte",e.NoCoinbaseViaMempool="NoCoinbaseViaMempool",e.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",e.ServerFailureDatabase="ServerFailureDatabase",e.ServerFailureOther="ServerFailureOther"}(dr||(dr={})),o(907);const gr=e=>Zn((e=>H(R(e)))(e));var wr,br;function mr(e,n="mainnet"){return n=Jt(n),function(e,n="mainnet"){n=Jt(n),e="string"==typeof e?Xn(e):e;const t=function(e,n){switch(n=Jt(n??Wt),e){case ir.P2PKH:switch(n.transactionVersion){case Ft.Mainnet:return Mt.MainnetSingleSig;case Ft.Testnet:return Mt.TestnetSingleSig;default:throw new Error(`Unexpected transactionVersion ${n.transactionVersion} for hashMode ${e}`)}case ir.P2SH:case ir.P2SHNonSequential:case ir.P2WPKH:case ir.P2WSH:case ir.P2WSHNonSequential:switch(n.transactionVersion){case Ft.Mainnet:return Mt.MainnetMultiSig;case Ft.Testnet:return Mt.TestnetMultiSig;default:throw new Error(`Unexpected transactionVersion ${n.transactionVersion} for hashMode ${e}`)}default:throw new Error(`Unexpected hashMode ${e}`)}}(ir.P2PKH,n);var r,o,i;return i=(r=t,o=gr(e),{type:wr.Address,version:r,hash160:o}),(0,nr.H4)(i.version,i.hash160)}(function(e){const n=function(e){return("string"==typeof e?e.length/2:e.byteLength)===$t}(e=bt(e));return Zn(ln(e.slice(0,32),n))}(e),n)}function vr(e){return(n=e,e="string"==typeof n?n:Zn(n)).length==2*$t?e:`${e}01`;var n}(br=wr||(wr={}))[br.Address=0]="Address",br[br.Principal=1]="Principal",br[br.LengthPrefixedString=2]="LengthPrefixedString",br[br.MemoString=3]="MemoString",br[br.Asset=4]="Asset",br[br.PostCondition=5]="PostCondition",br[br.PublicKey=6]="PublicKey",br[br.LengthPrefixedList=7]="LengthPrefixedList",br[br.Payload=8]="Payload",br[br.MessageSignature=9]="MessageSignature",br[br.StructuredDataSignature=10]="StructuredDataSignature",br[br.TransactionAuthField=11]="TransactionAuthField",vn.hmacSha256Sync=(e,...n)=>{const t=g.create(R,e);return n.forEach((e=>t.update(e))),t.digest()};const xr=2147483648,Er=e=>Ct(Ut(e.dataPrivateKey)),Ar=e=>Gn.fromExtendedKey(e.rootKey),Sr=async e=>{var n;const t=Jt(null!=(n=e.network)?n:"mainnet"),r=Object.assign({},Zt(t),e.client);try{const n=await r.fetch(`${r.baseUrl}/v1/addresses/stacks/${e.address}`),t=await n.json();if((t.names.length||0)>0)return t.names[0]}catch(e){}};var kr=o(474),Cr=o(300);function Ur(e){if(!e)throw new Error(`expected: true, actual: ${e}`)}const _r=async(e,n=Rt())=>{var t,r;const o=`https://api.hiro.so/v1/names/${e}`,i=await n(o);if(i.ok){const e=await i.json(),n=null==(r=null==(t=(0,Cr.parseZoneFile)(e.zonefile).uri)?void 0:t[0])?void 0:r.target;if(n)return n;throw new Error(`No zonefile uri found: ${e.zonefile}`)}},Ir=async(e,n=Rt())=>{const t=await n(`${e}/hub_info`);if(!t.ok)throw new Error("Failed to fetch hub info");return await t.json()},Br=({hubInfo:e,privateKey:n,gaiaHubUrl:t})=>{const r=e.read_url_prefix,o=(({hubInfo:e,privateKey:n,gaiaHubUrl:t})=>{const r=e.challenge_text,o={gaiaHubUrl:t,iss:Ut(n),salt:Zn(it(16))};return r&&(o.gaiaChallenge=r),`v1:${new kr.TokenSigner("ES256K",n).sign(o)}`})({hubInfo:e,privateKey:n,gaiaHubUrl:t});return{url_prefix:r,max_file_upload_size_megabytes:100,address:Ct(Ut(n)),token:o,server:t}},Pr=({privateKey:e,childPublicKeyHex:n})=>{const t=e.slice(0,64),r=Ut(t),o=Zn(it(16)),i={childToAssociate:n,iss:r,exp:31536e3+(new Date).getTime()/1e3,iat:Date.now()/1e3,salt:o};return new kr.TokenSigner("ES256K",t).sign(i)};function Hr(e){return n=>n[e]}const Tr="m/888'/0'",Or=async e=>(Ur(e.privateKey),{salt:await jr(e),rootKey:e.privateExtendedKey,configPrivateKey:Zn(Nr(e))}),Nr=e=>{const n=e.derive("m/44/5757'/0'/1").privateKey;if(!n)throw new TypeError("Unable to derive config key for wallet identities");return n},$r=e=>{const n=e.deriveChild(45+xr).privateKey;if(!n)throw new TypeError("Unable to derive config key for wallet identities");return Zn(n)},jr=async e=>{const n=Yn(Zn(e.derive(Tr).publicKey)),t=await async function(){const e=await nt();return"subtleCrypto"===e.name?new Et(e.lib):new xt(e.lib.createHash)}();return Zn(await t.digest(n,"sha256"))};var Kr=(e=>(e[e.Wallet=0]="Wallet",e[e.Data=1]="Data",e[e.Unknown=2]="Unknown",e))(Kr||{});const Rr=async({username:e,rootNode:n,index:t,network:r})=>{if(r&&(r=Jt(r)),e)return{username:e,stxDerivationType:await Lr({username:e,rootNode:n,index:t,network:r})};{const{username:e,derivationType:o}=await Dr({rootNode:n,index:t,network:r});return{username:e,stxDerivationType:o}}},Lr=async({username:e,rootNode:n,index:t,network:r})=>{if(r){const r=await function(e){const n=Jt(e.network??"mainnet"),t=Object.assign({},Zt(n),e.client),r=`${t.baseUrl}/v1/names/${e.name}`;return t.fetch(r).then((e=>{if(404===e.status)throw new Error("Name not found");if(200!==e.status)throw new Error(`Bad response status: ${e.status}`);return e.json()})).then((e=>e.address?Object.assign({},e,{address:e.address}):e))}({name:e});let o=mr(zr({rootNode:n,index:t}));return o!==r.address?(o=mr(Wr({rootNode:n,index:t})),o!==r.address?2:1):0}return 2},Dr=async e=>{var n;const t=Jt(null!=(n=e.network)?n:"mainnet"),r=Object.assign({},Zt(t),e.client);if(e.network){const n=mr(zr(e),e.network);let t=await Sr({address:n,client:r});if(t)return{username:t,derivationType:0};{const n=mr(Wr(e),e.network);if(t=await Sr({address:n,client:r}),t)return{username:t,derivationType:1}}}return{username:void 0,derivationType:0}},Fr=async e=>{var n;const t=Jt(null!=(n=e.network)?n:"mainnet"),r=Object.assign({},Zt(t),e.client),o=mr(Mr(e),t);return{username:await Sr({address:o,client:r})}},Mr=({rootNode:e,index:n,derivationType:t})=>0===t?zr({rootNode:e,index:n}):Wr({rootNode:e,index:n}),zr=({rootNode:e,index:n})=>{const t=e.derive("m/44'/5757'/0'/0").deriveChild(n);return Ur(t.privateKey),vr(t.privateKey)},Wr=({rootNode:e,index:n})=>{const t=e.derive(Tr).deriveChild(n+xr);return Ur(t.privateKey),vr(t.privateKey)},Vr=({rootNode:e,index:n,salt:t,stxDerivationType:r})=>{const o=0===r?zr({rootNode:e,index:n}):Wr({rootNode:e,index:n}),i=e.derive(Tr).deriveChild(n+xr);if(!i.privateKey)throw new Error("Must have private key to derive identities");return{stxPrivateKey:o,dataPrivateKey:Zn(i.privateKey),appsKey:i.deriveChild(0+xr).privateExtendedKey,salt:t,index:n}};var Gr=Object.defineProperty,qr=Object.defineProperties,Jr=Object.getOwnPropertyDescriptors,Zr=Object.getOwnPropertySymbols,Xr=Object.prototype.hasOwnProperty,Yr=Object.prototype.propertyIsEnumerable,Qr=(e,n,t)=>n in e?Gr(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,eo=(e,n)=>{for(var t in n||(n={}))Xr.call(n,t)&&Qr(e,t,n[t]);if(Zr)for(var t of Zr(n))Yr.call(n,t)&&Qr(e,t,n[t]);return e},no=(e,n)=>qr(e,Jr(n));function to(t=256){return(0,e.OF)(n.U,t)}const ro=to,oo=async({secretKey:t,password:r})=>{const o=Zn(await async function(t,r,o){let i;try{i=Zn((0,e.oy)(t,n.U))}catch(e){throw console.error("Invalid mnemonic phrase provided"),console.error(e),new Error("Not a valid bip39 mnemonic")}const s=Xn(i),a=await async function(){const e=await nt();return"subtleCrypto"===e.name?new Ot(e.lib):new Tt(e.lib.pbkdf2)}(),c=o?.getRandomBytes?o.getRandomBytes(16):it(16),u=await a.derive(r,c,1e5,48,"sha512"),l=u.slice(0,16),h=u.slice(16,32),f=u.slice(32,48),d=await ot(),p=await d.encrypt("aes-128-cbc",l,f,s),y=Qn(c,p);return Qn(c,It(h,y),p)}(t,r)),i=await(0,e.OI)(t),s=Gn.fromMasterSeed(i),a=await Or(s),c=no(eo({},a),{encryptedSecretKey:o,accounts:[],config:{accounts:[]}});return io(c)},io=e=>{const n=e.accounts.length,t=Vr({rootNode:Ar(e),index:n,salt:e.salt,stxDerivationType:Kr.Wallet});return no(eo({},e),{accounts:[...e.accounts,t]})};function so(e,n){const t=Object.assign({},n);if(!t.privateKey)throw new Error("Private key is required for decryption.");try{const n=JSON.parse(e);return async function(e,n){if(!n.ephemeralPK)throw new ct("Unable to get public key from cipher object. You might be trying to decrypt an unencrypted object.");const t=n.ephemeralPK;let r=fn(e,t,!0);r=r.slice(1);const o=Bt(r),i=Xn(n.iv);let s;if(n.cipherTextEncoding&&"hex"!==n.cipherTextEncoding){if("base64"!==n.cipherTextEncoding)throw new Error(`Unexpected cipherTextEncoding "${n.cipherText}"`);s=(0,wt.toByteArray)(n.cipherText)}else s=Xn(n.cipherText);const a=Qn(i,Xn(t),s),c=It(o.hmacKey,a);if(!function(e,n){if(e.length!==n.length)return!1;let t=0;for(let r=0;r<e.length;r++)t|=e[r]^n[r];return 0===t}(Xn(n.mac),c))throw new ct("Decryption failed: failure in MAC check");const u=await async function(e,n,t){const r=await ot();return await r.decrypt("aes-256-cbc",n,e,t)}(i,o.encryptionKey,s);return n.wasString?(l=u,(new TextDecoder).decode(l)):u;var l}(t.privateKey,n)}catch(e){throw e instanceof SyntaxError?new Error("Failed to parse encrypted content JSON. The content may not be encrypted. If using getFile, try passing { decrypt: false }."):e}}async function ao({wallet:e,gaiaHubConfig:n,fetchFn:t=Rt()}){const r=Ar(e),o=$r(r);try{const e=await t(`${n.url_prefix}${n.address}/wallet-config.json`);if(!e.ok)return null;const r=await e.text(),i=await so(r,{privateKey:o});return JSON.parse(i)}catch(e){return console.error(e),null}}const co=["debug","info","warn","error","none"],uo={},lo={};for(let e=0;e<co.length;e++){const n=co[e];uo[n]=e,lo[e]=n}class ho{static error(e){this.shouldLog("error")&&console.error(this.logMessage("error",e))}static warn(e){this.shouldLog("warn")&&console.warn(this.logMessage("warn",e))}static info(e){this.shouldLog("info")&&console.log(this.logMessage("info",e))}static debug(e){this.shouldLog("debug")&&console.log(this.logMessage("debug",e))}static logMessage(e,n){return`[${e.toUpperCase()}] ${n}`}static shouldLog(e){return uo.debug<=uo[e]}}async function fo(e,n,t,r="application/octet-stream",o=!0,i,s,a=Rt()){ho.debug(`uploadToGaiaHub: uploading ${e} to ${t.server}`);const c={"Content-Type":r,Authorization:`bearer ${t.token}`};s||(o?c["If-None-Match"]="*":i&&(c["If-Match"]=i));const u=await a(`${t.server}/store/${t.address}/${e}`,{method:"POST",headers:c,body:n});if(!u.ok)throw await async function(e,n,t){if(e.ok)throw new Error("Cannot get a BlockstackError from a valid response.");const r=await async function(e){let n,t="";try{t=await e.text();try{n=JSON.parse(t)}catch(e){}}catch(e){ho.debug(`Error getting bad http response text: ${e}`)}return{status:e.status,statusText:e.statusText,body:n||t}}(e);if(401===r.status)return new pt(n,r);if(402===r.status)return new ft(n,r);if(403===r.status)return new dt(n,r);if(404===r.status)throw new lt(n,r);if(409===r.status)return new ht(n,r);if(412===r.status)return new gt(n,r);if(413===r.status){const e=t&&t.max_file_upload_size_megabytes?(o=t.max_file_upload_size_megabytes,Number.isFinite(o)?Math.floor(1024*o*1024):0):0;return new yt(n,r,e)}return new Error(n);var o}(u,"Error when uploading to Gaia hub.",t);const l=await u.text();return JSON.parse(l)}async function po(e,n,t,r=Rt()){ho.debug(`connectToGaiaHub: ${e}/hub_info`);const o=await r(`${e}/hub_info`),i=await o.json(),s=i.read_url_prefix,a=function(e,n,t,r){const o=e.challenge_text,i=e.latest_auth_version&&parseInt(e.latest_auth_version.slice(1),10)>=1,s=Ut(n);if(!i)return function(e,n){let t;try{t=JSON.parse(e)}catch(e){throw new Error("Failed in parsing legacy challenge text from the gaia hub.")}if("gaiahub"===t[0]&&"blockstack_storage_please_sign"===t[3]){const t=gn(At(Yn(e)),bt(n.length===2*$t?n:`${n}01`).slice(0,32),{der:!1}),r=je.fromCompact(Zn(t)).toDERHex(),o=Ut(n);return(0,wt.fromByteArray)(Yn(JSON.stringify({publickey:o,signature:r})))}throw new Error("Failed to connect to legacy gaia hub. If you operate this hub, please update.")}(o,n);const a={gaiaChallenge:o,hubUrl:t,iss:s,salt:Zn(it(16)),associationToken:r};return`v1:${new kr.TokenSigner("ES256K",n).sign(a)}`}(i,n,e,t),c=Ct(Ut(n));return{url_prefix:s,max_file_upload_size_megabytes:i.max_file_upload_size_megabytes,address:c,token:a,server:e}}const yo=async({gaiaHubUrl:e,wallet:n})=>po(e,n.configPrivateKey),go=async({wallet:e,gaiaHubConfig:n,skipUpload:t,fetchFn:r=Rt()})=>{const o=await wo({wallet:e,gaiaHubConfig:n,fetchFn:r});if(o)return o;const i=mo(e);return t||await bo({wallet:e,gaiaHubConfig:n}),i},wo=async({wallet:e,gaiaHubConfig:n,fetchFn:t=Rt()})=>{try{const r=await t(`${n.url_prefix}${n.address}/wallet-config.json`);if(!r.ok)return null;const o=await r.text(),i=await so(o,{privateKey:e.configPrivateKey});return JSON.parse(i)}catch(e){return console.error(e),null}},bo=async({wallet:e,walletConfig:n,gaiaHubConfig:t})=>{const r=n||mo(e),o=await vo({wallet:e,walletConfig:r});return await fo("wallet-config.json",o,t,void 0,void 0,void 0,!0),r};function mo(e){return{accounts:e.accounts.map((e=>({username:e.username,apps:{}})))}}const vo=async({wallet:e,walletConfig:n})=>{const t=Ut(e.configPrivateKey);return await async function(e,n){const t=Object.assign({},n);let r;if(!t.publicKey){if(!t.privateKey)throw new Error("Either public key or private key must be supplied for encryption.");t.publicKey=Ut(t.privateKey)}const o="boolean"==typeof t.wasString?t.wasString:"string"==typeof e,i="string"==typeof e?Yn(e):e,s=await Pt(t.publicKey,i,o,t.cipherTextEncoding);let a=JSON.stringify(s);if(t.sign){"string"==typeof t.sign?r=t.sign:r||(r=t.privateKey);const e=function(e,n){const t="string"==typeof n?Yn(n):n,r=Ut(e);return{signature:Zn(gn(At(t),e)),publicKey:r}}(r,a),n={signature:e.signature,publicKey:e.publicKey,cipherText:a};a=JSON.stringify(n)}return a}(JSON.stringify(n),{publicKey:t})},xo=async({wallet:e,account:n,app:t,gaiaHubConfig:r,walletConfig:o})=>{e.accounts.forEach(((e,n)=>{const t=o.accounts[n];t?(t.apps=t.apps||{},t.username=e.username,o.accounts[n]=t):o.accounts.push({username:e.username,apps:{}})}));const i=o.accounts[n.index];return i.apps=i.apps||{},i.apps[t.origin]=t,o.accounts[n.index]=i,await bo({wallet:e,walletConfig:o,gaiaHubConfig:r}),o};var Eo=Object.defineProperty,Ao=Object.defineProperties,So=Object.getOwnPropertyDescriptors,ko=Object.getOwnPropertySymbols,Co=Object.prototype.hasOwnProperty,Uo=Object.prototype.propertyIsEnumerable,_o=(e,n,t)=>n in e?Eo(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Io=(e,n)=>{for(var t in n||(n={}))Co.call(n,t)&&_o(e,t,n[t]);if(ko)for(var t of ko(n))Uo.call(n,t)&&_o(e,t,n[t]);return e},Bo=(e,n)=>Ao(e,So(n));async function Po({wallet:e,gaiaHubUrl:n,network:t="mainnet",client:r}){const o=Object.assign({},Zt(Jt(t)),r),i=await Ir(n,o.fetch),s=Ar(e),a=Br({hubInfo:i,privateKey:$r(Ar(e)),gaiaHubUrl:n}),c=Br({hubInfo:i,privateKey:e.configPrivateKey,gaiaHubUrl:n}),[u,l]=await Promise.all([wo({wallet:e,gaiaHubConfig:c,fetchFn:o.fetch}),ao({wallet:e,gaiaHubConfig:a,fetchFn:o.fetch})]);if(u&&u.accounts.length>=((null==l?void 0:l.identities.length)||0)){const n=await Promise.all(u.accounts.map((async(n,r)=>{let o=e.accounts[r];const{username:i}=await Fr({rootNode:s,index:r,derivationType:Kr.Wallet,network:t});return o=o?Bo(Io({},o),{stxPrivateKey:zr({rootNode:s,index:r})}):Vr({rootNode:s,index:r,salt:e.salt,stxDerivationType:Kr.Wallet}),Bo(Io({},o),{username:i})})));return Bo(Io({},e),{accounts:n})}if(l){const n=await Promise.all(l.identities.map((async(n,r)=>{let o=e.accounts[r];const{username:i}=await Fr({rootNode:s,index:r,derivationType:Kr.Wallet,network:t});return o=o?Bo(Io({},o),{stxPrivateKey:zr({rootNode:s,index:r})}):Vr({rootNode:s,index:r,salt:e.salt,stxDerivationType:Kr.Wallet}),Bo(Io({},o),{username:i})}))),r={};l.hideWarningForReusingIdentity&&(r.hideWarningForReusingIdentity=!0);const o={accounts:l.identities.map((e=>({username:e.username,apps:e.apps}))),meta:r};return await bo({wallet:e,walletConfig:o,gaiaHubConfig:c}),Bo(Io({},e),{accounts:n})}return e}function Ho(e){return`did:btc-addr:${e}`}async function To(e,n){const t=await Pt(e,Yn(n),!0);return Zn(Yn(JSON.stringify(t)))}const Oo={"@type":"Person","@context":"http://schema.org"},No="profile.json",$o=async(e,n=Rt())=>{var t;try{const r=await n(e);if(r.ok){const e=await r.json(),{decodedToken:n}=e[0];return null==(t=n.payload)?void 0:t.claim}if(404===r.status)return null;throw new Error("Network error when fetching profile")}catch(e){return null}},jo=async({account:e,gaiaHubUrl:n})=>{if(e.username)try{const n=await _r(e.username);if(n)return n}catch(e){console.warn("Error fetching profile URL from zone file:",e)}return`${n}${Er(e)}/profile.json`};function Ko({profile:e,account:n}){const t=n.stxPrivateKey,r=Ut(t.slice(0,64)),o=(s=function(e,n,t,r,o="ES256K",i=new Date,s=function(){return new Date((new Date).setFullYear((new Date).getFullYear()+1))}()){if("ES256K"!==o)throw new Error("Signing algorithm not supported");const a=kr.SECP256K1Client.derivePublicKey(n);t||(t={publicKey:a}),r||(r={publicKey:a});const c=new kr.TokenSigner(o,n),u={jti:qn(),iat:i.toISOString(),exp:s.toISOString(),subject:t,issuer:r,claim:e};return c.sign(u)}(e,t,{publicKey:r}),{token:s,decodedToken:(0,kr.decodeToken)(s)}),i=[o];var s;return JSON.stringify(i,null,2)}async function Ro({gaiaHubUrl:e,account:n,signedProfileTokenData:t,gaiaHubConfig:r}){const o=r||await po(e,n.dataPrivateKey);await fo(No,t,o,void 0,void 0,void 0,!0)}const Lo=async({profile:e,gaiaHubUrl:n,account:t,gaiaHubConfig:r})=>{const o=Ko({profile:e,account:t});await Ro({gaiaHubUrl:n,account:t,signedProfileTokenData:o,gaiaHubConfig:r})};var Do=Object.defineProperty,Fo=Object.defineProperties,Mo=Object.getOwnPropertyDescriptors,zo=Object.getOwnPropertySymbols,Wo=Object.prototype.hasOwnProperty,Vo=Object.prototype.propertyIsEnumerable,Go=(e,n,t)=>n in e?Do(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,qo=(e,n)=>{for(var t in n||(n={}))Wo.call(n,t)&&Go(e,t,n[t]);if(zo)for(var t of zo(n))Vo.call(n,t)&&Go(e,t,n[t]);return e};function Jo(e,n="mainnet"){if("account"in e){const{account:n,network:t="mainnet"}=e;return mr(n.stxPrivateKey,t)}return mr(e.stxPrivateKey,n)}const Zo=e=>e.username?e.username.split(".")[0]:`Account ${e.index+1}`,Xo=({account:e,appDomain:n})=>{const t=function(e){let n=0;if(0===e.length)return n;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return 2147483647&n}(Zn(At(Yn(`${n}${e.salt}`)))),r=Gn.fromExtendedKey(e.appsKey).deriveChild(t+xr);if(!r.privateKey)throw"Needs private key";return Zn(r.privateKey)},Yo=async({account:e,appDomain:n,transitPublicKey:t,scopes:r=[],gaiaHubUrl:o,appPrivateKeyFromWalletSalt:i=null,additionalData:s={},fetchFn:a=Rt()})=>{const c=Xo({account:e,appDomain:n}),{hubInfo:u,profileUrl:l,profile:h}=await async function({gaiaHubUrl:e,fetchFn:n,account:t}){const r=await Ir(e,n).catch((()=>{}));if(!r)return{};const o=await jo({account:t,gaiaHubUrl:r.read_url_prefix});return{hubInfo:r,profileUrl:o,profile:await $o(o,n)||Oo}}({gaiaHubUrl:o,fetchFn:a,account:e});if(r.includes("publish_data")&&u&&h){h.apps||(h.apps={});const t=Ut(c),r=Ct(t),i=`${u.read_url_prefix}${r}/`;h.apps[n]=i,h.appsMeta||(h.appsMeta={}),h.appsMeta[n]={storage:i,publicKey:t};const s=Br({hubInfo:u,privateKey:e.dataPrivateKey,gaiaHubUrl:o});await Lo({profile:h,account:e,gaiaHubUrl:o,gaiaHubConfig:s})}const f=Ut(c.slice(0,64)),d=Pr({privateKey:e.dataPrivateKey,childPublicKeyHex:f});return async function(e,n={},t,r=null,o=null,i=function(){return new Date((new Date).setMonth((new Date).getMonth()+1))}().getTime(),s=null,a=null,c=null,u=null,l=null){const h=kr.SECP256K1Client.derivePublicKey(e),f=Ct(h);let d=o,p=r,y={};null!=o&&(null!=s&&(d=await To(s,o),null!=r&&(p=await To(s,r))),y={email:t?.email?t.email:null,profile_url:t?.profileUrl?t.profileUrl:null,hubUrl:a,blockstackAPIUrl:c,associationToken:u,version:"1.4.0"});const g=Object.assign({},{jti:qn(),iat:Math.floor((new Date).getTime()/1e3),exp:Math.floor(i/1e3),iss:Ho(f),private_key:d,public_keys:[h],appPrivateKeyFromWalletSalt:l,profile:n,core_token:p},y);return new kr.TokenSigner("ES256k",e).sign(g)}(e.dataPrivateKey,qo((p=qo({},h||{}),y={stxAddress:{testnet:Jo({account:e,network:"testnet"}),mainnet:Jo({account:e,network:"mainnet"})}},Fo(p,Mo(y))),s),l?{profileUrl:l}:null,void 0,c,void 0,t,o,void 0,d,i);var p,y}})(),i})()));
//# sourceMappingURL=index.js.map